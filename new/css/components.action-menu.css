/* components.action-menu.css
 * Extracted from legacy .action-menu + button cluster styling.
 */
:root {
  --action-menu-bg: linear-gradient(145deg,#2a2d31,#181a1c 65%); /* lighter legacy-inspired */
  --action-menu-border: 3px solid #000;
  --action-menu-inner-border: 0 0 0 2px #353a40 inset;
  --action-menu-radius: 6px;
  --action-menu-gap: 8px;
  --action-menu-padding: 12px 14px 14px;
  --action-menu-title-color: var(--accent-monsters,#ffcf33);
  --action-menu-shadow: 4px 4px 0 #000, 0 0 0 2px #222 inset;
}

.cmp-action-menu {
  position:fixed;
  top:110px; /* desktop default: near top */
  right:48px; /* desktop default */
  display:flex;
  flex-direction:column;
  flex-wrap:nowrap;
  gap:var(--action-menu-gap);
  background:var(--action-menu-bg);
  padding:var(--action-menu-padding);
  border:var(--action-menu-border);
  border-radius:var(--action-menu-radius);
  box-shadow:var(--action-menu-shadow);
  z-index:6000; /* below peek modal (7000) but above other panels */
  font-family:'Bangers',cursive;
  letter-spacing:.5px;
  width:260px; /* unify width */
  max-width:260px;
  min-width:260px;
  align-items:stretch;
  filter:none;
  -webkit-backdrop-filter:none;
  backdrop-filter:none;
}

/* When draggable and has transform applied, allow free positioning */
.cmp-action-menu[data-draggable="true"][style*="transform"] {
  top: 0;
  left: 0;
  right: auto;
  bottom: auto;
}
.app-toolbar, .game-toolbar, [data-toolbar] { margin-bottom:12px; }
.cmp-action-menu .am-label { display:block; position:static; margin:0 0 8px 0; background:transparent; color:#fff; padding:2px 6px 4px; font-size:24px; line-height:1; border:none; box-shadow:none; letter-spacing:1.2px; text-align:center; text-shadow:-2px -2px 0 #000,2px -2px 0 #000,-2px 2px 0 #000,2px 2px 0 #000; }
.cmp-action-menu[data-layout="horizontal"] { flex-direction:row; flex-wrap:wrap; align-items:flex-start; }
.cmp-action-menu[data-layout="horizontal"] .am-label { margin-bottom:6px; }

/* Power Cards Menu Styles */
.power-cards-menu-container {
  position: relative;
  width: 100%;
}

.power-cards-btn {
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  width: 100%;
  background: linear-gradient(135deg, #2c5234, #1a3d20) !important;
  border-color: #4a7c59 !important;
}

.power-cards-btn:hover:not(:disabled) {
  background: linear-gradient(135deg, #345a3b, #1f4524) !important;
}

.power-cards-btn .arrow-left,
.power-cards-btn .arrow-right {
  font-size: 14px;
  font-weight: bold;
  color: #fff;
  text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;
  transition: opacity 0.2s ease;
  width: 20px;
  text-align: center;
  flex-shrink: 0;
  position: absolute;
}

.power-cards-btn .arrow-left {
  left: 8px;
  opacity: 0; /* Hidden by default (desktop) */
}

.power-cards-btn .arrow-right {
  right: 8px;
  opacity: 1; /* Visible by default (desktop) */
}

.power-cards-btn .btn-text {
  flex: 1;
  text-align: center;
  position: relative;
  z-index: 1;
}

.power-cards-submenu {
  position: absolute;
  top: 0;
  z-index: 6700;
  background: var(--action-menu-bg);
  border: var(--action-menu-border);
  border-radius: var(--action-menu-radius);
  box-shadow: var(--action-menu-shadow);
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 200px;
  opacity: 0;
  transform: scale(0.95);
  transition: opacity 0.2s ease, transform 0.2s ease;
  pointer-events: none;
}

.power-cards-submenu:not([hidden]) {
  pointer-events: auto;
}

.power-cards-submenu:not([hidden]) {
  opacity: 1;
  transform: scale(1);
}

.power-cards-submenu.submenu-left {
  right: 100%;
  margin-right: 8px;
}

.power-cards-submenu.submenu-right {
  left: 100%;
  margin-left: 8px;
}

.power-cards-submenu button {
  white-space: nowrap;
  font-size: 14px;
  padding: 6px 12px;
}

/* Deck illumination on power cards button hover */
.power-cards-btn:hover ~ .power-cards-submenu,
.power-cards-btn:hover {
  animation: deckIlluminate 0.3s ease-out;
}

@keyframes deckIlluminate {
  0% { box-shadow: var(--action-menu-shadow); }
  50% { box-shadow: var(--action-menu-shadow), 0 0 15px #4a7c59; }
  100% { box-shadow: var(--action-menu-shadow); }
}

/* Trigger deck illumination in power cards panel */
.power-cards-btn:hover {
  --deck-illuminate: true;
}

/* All action menu buttons - consistent styling with power card font */
.cmp-action-menu button {
  font-family: 'Bangers', cursive !important;
  font-size: 18px !important;
  letter-spacing: 0.75px !important;
  color: #fff !important;
  text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000 !important;
  min-height: 48px !important;
  width: 100% !important;
  padding: 8px 12px !important;
  border: 2px solid #000 !important;
  border-radius: 6px !important;
  box-shadow: 2px 2px 0 #000, 0 0 0 2px #222 inset !important;
  transition: all 0.2s ease !important;
}

/* End Turn Button - Red when enabled */
.cmp-action-menu [data-action="end"]:not(:disabled) {
  background: linear-gradient(145deg, #8b2c2c, #5c1a1a) !important;
  border-color: #a64545 !important;
  color: #fff !important;
  text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000 !important;
}

.cmp-action-menu [data-action="end"]:not(:disabled):hover {
  background: linear-gradient(145deg, #9d3333, #661f1f) !important;
  color: #fff !important;
}
.cmp-action-menu[data-layout="vertical"] { flex-direction:column; flex-wrap:nowrap; width:260px; }
.cmp-action-menu button { flex:0 0 auto; width:100%; max-width:100%; }
.cmp-action-menu { row-gap:12px; }
.cmp-action-menu button {
  --btn-bg:#ffdf3d; /* brighter gold */
  --btn-bg-alt:#2d95ff;
  --btn-bg-muted:#c5c5c5;
  background:var(--btn-bg);
  background-image:linear-gradient(180deg,rgba(255,255,255,.38),rgba(0,0,0,.18));
  /* For black-text buttons, remove black border and shadows by default */
  border:none;
  box-shadow:none;
  font-family:'Bangers',cursive;
  letter-spacing:.5px;
  padding:8px 16px 10px;
  font-size:18px;
  line-height:1;
  cursor:pointer;
  position:relative;
  /* Remove heavy black text-outline for black text */
  text-shadow:none;
  color:#111; /* contrasts with brighter gold */
  transition:transform .18s cubic-bezier(.25,.46,.45,.94), box-shadow .18s ease, filter .2s ease;
}
.cmp-action-menu button[data-action="keep"],
.cmp-action-menu button[data-action="flush"],
.cmp-action-menu button[data-action="end"] { background:var(--btn-bg-alt); color:#fff; text-shadow:-1px -1px 0 #06212c,1px -1px 0 #06212c,-1px 1px 0 #06212c,1px 1px 0 #06212c,0 0 5px rgba(0,0,0,.5); }
/* Special styling for flush button */
.cmp-action-menu button[data-action="flush"] { 
  background:linear-gradient(135deg, #d4a017, #b8860b);
  border: 2px solid #8b7355;
  font-size: 16px;
}
.cmp-action-menu button[data-action="flush"]:not(:disabled):hover {
  background:linear-gradient(135deg, #f4c430, #d4a017);
  transform: translateY(-2px);
}
.cmp-action-menu button:disabled { background:var(--btn-bg-muted); color:#333; text-shadow:none; border:none; box-shadow:none; }
/* Do not add shadows/borders on hover/active for black-text buttons */
.cmp-action-menu button:not([data-action="keep"]):not([data-action="end"]):not(:disabled):hover { transform:translate(-2px,-3px); box-shadow:none; filter:brightness(1.08); }
.cmp-action-menu button:not([data-action="keep"]):not([data-action="end"]):not(:disabled):active { transform:translate(0,0); box-shadow:none; }
.cmp-action-menu button:focus-visible { outline:3px solid #fff; outline-offset:2px; }
.cmp-action-menu[data-draggable="true"] { cursor:move; }
.cmp-action-menu.cpu-rolling { filter:grayscale(1); transform:scale(.95); transition:filter .3s ease, transform .3s ease, opacity .3s ease; }

/* CPU turn: show buttons visually muted but preserve color identity */
.cmp-action-menu.cpu-turn button { opacity:.55; filter:saturate(.6) brightness(.9); cursor:not-allowed; }
.cmp-action-menu.cpu-turn button:disabled { background:var(--btn-bg); color:#222; }
.cmp-action-menu.cpu-turn button[data-action="keep"],
.cmp-action-menu.cpu-turn button[data-action="end"] { background:var(--btn-bg-alt); }
/* Prevent hover/active transforms during CPU turn */
.cmp-action-menu.cpu-turn button:not(:disabled):hover,
.cmp-action-menu.cpu-turn button:not(:disabled):active { transform:none; box-shadow:none; filter:saturate(.6) brightness(.9); }

/* Flash indicator when CPU performs an action */
.cmp-action-menu button.cpu-flash { animation:cpu-flash-border 1.1s ease; }
@keyframes cpu-flash-border { 0% { box-shadow:0 0 0 0 #fff; } 25% { box-shadow:0 0 8px 3px #fff; } 55% { box-shadow:0 0 10px 4px rgba(255,255,255,.85); } 100% { box-shadow:none; } }

/* Restore borders/shadows for non-black text variants (keep/end) */
.cmp-action-menu button[data-action="keep"],
.cmp-action-menu button[data-action="end"] {
  border:3px solid #000;
  box-shadow:3px 3px 0 #000,0 0 0 2px #222 inset;
}
.cmp-action-menu button[data-action="keep"]:not(:disabled):hover,
.cmp-action-menu button[data-action="end"]:not(:disabled):hover { box-shadow:5px 5px 0 #000,0 0 0 2px #222 inset; }
.cmp-action-menu button[data-action="keep"]:not(:disabled):active,
.cmp-action-menu button[data-action="end"]:not(:disabled):active { box-shadow:2px 2px 0 #000,0 0 0 2px #222 inset; }

/* --- Mobile/touch layout: menu is fully hidden until opened (no slide animation) --- */
@media (max-width: 760px), (pointer: coarse) {
  /* Mobile: anchor from bottom corners and expand upward, consistent width and full-width buttons */
  .cmp-action-menu {
    position: fixed;
    top: auto; left: 8px; right: auto;
    /* bottom is computed dynamically from the triggering button via JS */
    width: max-content;
    max-width: calc(100vw - 16px);
    min-width: 160px;
  flex-direction: column;
    align-items: stretch;
    justify-content: flex-start;
    gap: 10px;
    /* Fully hidden by default on mobile; becomes visible only when opened */
    display: none;
  transform: none;
    transition: none;
  }
  /* Hide label on mobile */
  .cmp-action-menu .am-label { display:none; }
    /* Make buttons look like Tools menu entries on mobile: flat light buttons */
    .cmp-action-menu button { background:#e6e6e6; color:#111; border:none; box-shadow:none; }
    .cmp-action-menu button[data-action="keep"],
    .cmp-action-menu button[data-action="end"] { background:#e6e6e6; color:#111; text-shadow:none; border:none; box-shadow:none; }
  .cmp-action-menu[data-hamburger-corner="left"] { left: 8px; right: auto; }
  .cmp-action-menu[data-hamburger-open] { display:flex; }
  .cmp-action-menu .am-label { display:none; }
  /* Auto-size to longest item; keep a reasonable min-width */
  .cmp-action-menu { width: max-content; max-width: calc(100vw - 16px); }
  .cmp-action-menu button { width: auto; flex: 0 0 auto; min-width: 160px; }
  .cmp-action-menu[data-draggable="true"] { cursor: default; }
}

/* Invisible backdrop to allow outside-click closing on mobile when menu is open */
@media (max-width: 760px), (pointer: coarse) {
  .action-menu-backdrop { position: fixed; inset: 0; z-index: 5995; display:none; }
  .action-menu-backdrop[data-show] { display:block; }
}
