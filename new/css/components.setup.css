/* Setup modal matching legacy Monster Selection UI w/ animated entry */
.cmp-setup.setup-modal { position: fixed; inset: 0; display:flex; justify-content:center; align-items:flex-start; padding-top:4vh; z-index: 12000; 
	background: 
		radial-gradient(circle at 1px 1px, rgba(0,0,0,0.08) 1px, transparent 1px) 0 0/12px 12px,
		radial-gradient(circle at 1px 1px, rgba(0,0,0,0.06) 1px, transparent 1px) 6px 6px/12px 12px,
		#fbf6ea;
    transition: opacity .45s ease, transform .45s ease; will-change: opacity, transform; opacity:1; transform: translateY(0) scale(1); visibility:visible; pointer-events:auto;
}
.cmp-setup.setup-modal.hidden { opacity:0; transform: translateY(18px) scale(.96); visibility:hidden; pointer-events:none; }
.cmp-setup .setup-frame { background:transparent; border:none; box-shadow:none; padding:18px 22px 22px; width: min(96vw, 1200px); display:flex; flex-direction:column; max-height:calc(100vh - 8vh); }

/* Default text in setup to black for readability on light background */
.cmp-setup { color:#000; }

.cmp-setup .setup-title { font-family:'Bangers', cursive; font-size:56px; color:#FFD700; text-align:center; letter-spacing:2px; text-shadow: -3px -3px 0 #000, 3px -3px 0 #000, -3px 3px 0 #000, 3px 3px 0 #000; margin-bottom:18px; filter: drop-shadow(0 6px 0 #000); }

.cmp-setup .setup-controls { display:flex; gap:16px; align-items:center; justify-content:center; margin-bottom:18px; }
.cmp-setup .pill-btn { background: linear-gradient(#ffffff, #efefef); border:3px solid #111; border-radius:999px; padding:10px 18px; font-weight:900; box-shadow:6px 6px 0 #000; cursor:pointer; letter-spacing:.5px; }
.cmp-setup .pill-btn.gold { background: linear-gradient(#ffd24a, #ffb400); }
.cmp-setup .pill-btn:hover { transform: translateY(-1px); }
.cmp-setup .pill-btn { text-transform: uppercase; }
.cmp-setup .dropdown { position:relative; }
/* Legacy-inspired pill styling refinement */
.cmp-setup .dropdown-toggle { position:relative; display:flex; align-items:center; gap:10px; min-width:210px; justify-content:center; font-family:'Bangers',cursive; font-size:22px; letter-spacing:1px; padding:14px 26px; border:4px solid #000; box-shadow:4px 4px 0 #000, 0 0 0 3px #ffcc33 inset; background:linear-gradient(180deg,#ffc21f 0%, #ff9500 55%, #ffae00 56%, #ffdf7a 100%); color:#000; transition:transform .18s ease, box-shadow .18s ease, filter .3s; }
.cmp-setup .dropdown-toggle:hover { transform:translateY(-2px); filter:brightness(1.05) saturate(1.05); }
.cmp-setup .dropdown.open .dropdown-toggle { transform:translateY(0) scale(.98); box-shadow:3px 3px 0 #000, 0 0 0 3px #ffcc33 inset; }
.cmp-setup .dropdown .chev { font-weight:900; font-size:26px; line-height:1; display:inline-block; transition:transform .25s ease; text-shadow:none; }
.cmp-setup .dropdown.open .dropdown-toggle .chev { transform:rotate(180deg); }

/* Animated dropdown menu */
.cmp-setup .dropdown-menu { position:absolute; top:108%; left:0; background:#fffef8; border:4px solid #000; box-shadow:8px 8px 0 #000; list-style:none; padding:8px 0 10px; margin:0; min-width:230px; display:block; opacity:0; transform:translateY(10px) scale(.96); pointer-events:none; transition:opacity .25s ease, transform .3s cubic-bezier(.22,1.15,.32,1); z-index:120; font-family:'Bangers',cursive; }
.cmp-setup .dropdown.open .dropdown-menu { opacity:1; transform:translateY(0) scale(1); pointer-events:auto; }
.cmp-setup .dropdown-menu::before { content:""; position:absolute; top:-14px; left:34px; width:26px; height:14px; background:#fffef8; border:4px solid #000; border-bottom:none; clip-path:polygon(0 100%,50% 0,100% 100%); box-sizing:border-box; }
.cmp-setup .dropdown-menu li { padding:10px 18px 11px; cursor:pointer; font-weight:900; font-size:18px; color:#000; letter-spacing:.5px; text-transform:uppercase; position:relative; }
.cmp-setup .dropdown-menu li+li { border-top:2px dotted rgba(0,0,0,.15); }
.cmp-setup .dropdown-menu li:hover { background:linear-gradient(90deg,#ffe9a8,#ffd76a); }
.cmp-setup .dropdown-menu li:active { background:linear-gradient(90deg,#ffc843,#ffad0a); }

.cmp-setup .setup-body { display:grid; grid-template-columns: 1fr 320px; gap:28px; align-items:start; flex:1; overflow:hidden; min-height:0; }
.cmp-setup .cards-grid { display:grid; grid-template-columns: repeat(3, 1fr); gap:30px; padding:4px; overflow-y:auto; overscroll-behavior:contain; scrollbar-gutter: stable; }
/* Scroll constraint so extra monsters do not push footer offscreen */
.cmp-setup .cards-grid { max-height:100%; }
.cmp-setup .setup-body > .cards-grid { /* allow grid area to shrink within allocated space */ min-height:0; }
/* Custom scrollbar (webkit) */
.cmp-setup .cards-grid::-webkit-scrollbar { width:10px; }
.cmp-setup .cards-grid::-webkit-scrollbar-track { background:#e4dccd; border:2px solid #111; box-shadow:inset 2px 2px 0 #000; }
.cmp-setup .cards-grid::-webkit-scrollbar-thumb { background:#c0b49f; border:2px solid #111; box-shadow:2px 2px 0 #000; }
.cmp-setup .cards-grid::-webkit-scrollbar-thumb:hover { background:#b3a892; }
.cmp-setup [data-monster-card].is-unavailable { opacity:.6; filter: grayscale(100%); cursor:not-allowed; }
.cmp-setup [data-monster-card][draggable="true"] { cursor: grab; }
.cmp-setup [data-monster-card][draggable="true"]:active { cursor: grabbing; }

/* Monster polaroid card */
.cmp-setup .monster-card { background:transparent; border:none; box-shadow:none; padding:0; position:relative; aspect-ratio: 4/3; display:flex; align-items:center; justify-content:center; cursor:pointer; }
.cmp-setup .monster-card .stack { position:relative; width: 86%; height: 80%; }
.cmp-setup .monster-card .polaroid { position:absolute; inset:0; background:linear-gradient(180deg, #fff 0%, #fff 70%, #f1e3c7 100%); border:3px solid #111; box-shadow:4px 4px 0 #000; display:flex; align-items:center; justify-content:center; transform: rotate(-2deg); }
.cmp-setup .monster-card .polaroid::before, .cmp-setup .monster-card .polaroid::after { content:''; position:absolute; inset:0; border:3px solid #111; background:#f4e6ca; box-shadow:4px 4px 0 #000; transform-origin:center; z-index:-1; }
.cmp-setup .monster-card .stack::before { content:''; position:absolute; inset:0; background:#0000; box-shadow:0 18px 0 #555; transform: translate(0, 10px); opacity:.15; }
.cmp-setup .monster-card .polaroid::before { transform: translate(10px, 10px) rotate(2deg); }
.cmp-setup .monster-card .polaroid::after { transform: translate(-10px, 14px) rotate(-4deg); }
.cmp-setup .monster-card .photo { background:#fff; border:2px solid #111; padding:10px; }
.cmp-setup .monster-card img { width:160px; max-width:100%; height:140px; object-fit:contain; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; filter:none; opacity:1; }
.cmp-setup .monster-card:hover { transform: translateY(-2px); }
.cmp-setup .monster-card.selected img { filter: none; opacity:1; }


/* Sidebar selection */
.cmp-setup .selection-sidebar { display:flex; flex-direction:column; gap:16px; align-items:flex-start; }
/* Two-column grid for selected (human + CPU/monster) tiles */
.cmp-setup .mini-list { display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap:16px; width:100%; justify-items:center; }
.cmp-setup .mini-card { width:140px; min-height:180px; border:3px solid #111; box-shadow:6px 6px 0 #000; display:flex; align-items:center; justify-content:flex-start; gap:8px; padding:14px 10px; background:#fff; flex-direction:column; }
.cmp-setup .mini-card.vertical { width:140px; min-height:180px; }
.cmp-setup .mini-card.human-placeholder { background:#fffbe6; }
.cmp-setup .mini-card.human-placeholder .mini-photo.placeholder { font-family:'Bangers',cursive; font-size:42px; color:#000; display:flex; align-items:center; justify-content:center; }
.cmp-setup .mini-card.human-placeholder .mini-name { font-size:13px; }
.cmp-setup .mini-card.human { background: var(--mini-bg, #ffe7f8); }
.cmp-setup .mini-card.cpu { background: #cfe9ff; flex-direction:column; align-items:flex-start; justify-content:center; padding-left:14px; }
.cmp-setup .mini-card.cpu.vertical { width:140px; min-height:180px; align-items:center; padding:14px 10px; }
.cmp-setup .mini-card.droppable { outline:3px solid transparent; }
.cmp-setup .mini-card.droppable.drag-over { outline-color:#ffb400; box-shadow:0 0 0 4px #000 inset, 6px 6px 0 #000; }
.cmp-setup .mini-card[draggable="true"] { cursor: grab; }
.cmp-setup .mini-card[draggable="true"]:active { cursor: grabbing; }
.cmp-setup .mini-photo { width:70px; height:70px; border:2px solid #111; background:#fff; display:flex; align-items:center; justify-content:center; }
.cmp-setup .mini-photo img { width:100%; height:100%; object-fit:contain; }
.cmp-setup .mini-name { font-weight:900; font-size:15px; text-align:center; }
.cmp-setup .cpu-label { font-family:'Bangers', cursive; font-size:28px; font-weight:900; color:#000; text-shadow: none; }
.cmp-setup .cpu-sub { margin-top:-4px; font-weight:800; font-size:13px; color:#000; }

/* Footer */
.cmp-setup .setup-footer { margin-top:18px; display:flex; align-items:center; justify-content:space-between; flex-shrink:0; }
.cmp-setup .reset-link { background:none; border:none; color:#2f506a; font-weight:900; cursor:pointer; text-decoration:none; display:flex; align-items:center; gap:6px; filter: drop-shadow(0 2px 0 #000); }
.cmp-setup .start-btn { background:#bdbdbd; color:#000; border:3px solid #111; box-shadow:8px 8px 0 #000; padding:14px 22px; font-weight:900; letter-spacing:1px; cursor:not-allowed; }
.cmp-setup .start-btn:not([disabled]) { background:#4a9f4a; cursor:pointer; }



@media (max-width: 980px) {
	.cmp-setup .setup-body { grid-template-columns: 1fr; }
	.cmp-setup .selection-sidebar { align-items:center; }
}
