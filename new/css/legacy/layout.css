/* FOR FUTURE LEGACY REMOVAL: Full legacy snapshot of layout.css */
/* Duplicated from ../layout.css at time of centralization. */
/* Only referenced from index.html during migration. */

/* === Transplanted Enhanced layout.css === */
/* NOTE: This is a verbatim copy (at time of transplant) of the enhanced root css/layout.css. */
/*       Future enhancements must occur ONLY in this file (inside new/). Root file is now frozen. */

/* === Z-INDEX HIERARCHY === */
/* 
 * Z-Index stack (highest to lowest):
 * 10000+ : Splash screen (always highest)
 * 9000-9999 : Winner/end of game modals 
 * 8000-8999 : Modal dialogs (toolbar-launched) + Monster Selection dialog
 * 7000-7999 : Pause overlay (covers area above toolbar)
 * 6000-6999 : Monsters and power cards side panels  
 * 5000-5999 : Main "King of Tokyo" header
 * 4000-4999 : Bottom-ui "table" (cpu-notifications, action-menu, dice-area, toolbar)
 * 3000-3999 : Active player card and round-incrementor
 * 2000-2999 : Reserved for temporary overlays/dragging
 * 1000-1999 : Reserved for future use
 * 500-999   : Playing area hover effects and highlights
 * 300-499   : Playing area base content (Tokyo areas, player cards)
 * 100-299   : Background patterns and base elements
 * 1-99      : Document flow and basic positioning
 * 
 * NOTE: Pause overlay stops above toolbar (bottom: 90px) to keep toolbar accessible
 */

*::-webkit-scrollbar { display: none; }
* { -ms-overflow-style: none; scrollbar-width: none; }

/* Hide game container initially */
.game-container { display:none; min-height:100vh; background: linear-gradient(45deg, transparent 25%, rgba(255, 215, 0, 0.1) 25%, rgba(255, 215, 0, 0.1) 50%, transparent 50%, transparent 75%, rgba(255, 140, 0, 0.1) 75%),
		linear-gradient(-45deg, transparent 25%, rgba(255, 69, 0, 0.1) 25%, rgba(255, 69, 0, 0.1) 50%, transparent 50%, transparent 75%, rgba(220, 20, 60, 0.1) 75%),
		linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
	background-size:60px 60px, 80px 80px, 100% 100%; padding:20px; position:relative; border:4px solid #000; border-radius:0; box-shadow:inset 0 0 50px rgba(0,0,0,.8); }
#game-container.show { display:block; }

/* Body Background */
body { background: radial-gradient(circle at 4px 4px, rgba(255,255,255,0.05) 1px, transparent 0),
		linear-gradient(to bottom, transparent 85%, #000 85.5%, #000 88%, #111 88.5%, #111 91%, #000 91.5%, #000 94%, #222 94.5%, #222 97%, #000 97.5%, #000 100%),
		linear-gradient(135deg, #000 0%, #1a1a1a 25%, #2a2a2a 50%, #3a3a3a 75%, #4a4a4a 100%);
	background-size:20px 20px, 100% 100%, 100% 100%; min-height:100vh; position:relative; }
body::before { content:''; position:fixed; top:0; left:0; width:100%; height:100%; background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.15) 1px, transparent 0); background-size:20px 20px; pointer-events:none; z-index:100; }

#game-container { max-width:100vw; height:100vh; margin:0; padding:10px 0; position:relative; z-index:200; overflow:visible; box-sizing:border-box; }

/* Header */
.game-header { background: linear-gradient(135deg, #2c1810 0%, #8b4513 20%, #ff6b00 40%, #ffaa00 60%, #8b4513 80%, #2c1810 100%); padding:15px 20px; border-radius:15px; margin-bottom:15px; display:flex; justify-content:center; align-items:center; box-shadow:8px 8px 0px #000,12px 12px 25px rgba(0,0,0,.5); border:6px solid #000; position:relative; overflow:hidden; background-image: radial-gradient(circle at 3px 3px, rgba(0,0,0,0.1) 1px, transparent 0), linear-gradient(135deg, #2c1810 0%, #8b4513 20%, #ff6b00 40%, #ffaa00 60%, #8b4513 80%, #2c1810 100%); background-size:12px 12px, 100% 100%; }
.active-player-name { font-family:'Bangers',cursive; font-size:2em; font-weight:bold; color:#FFD700; text-shadow:-2px -2px 0 #000,2px -2px 0 #000,-2px 2px 0 #000,2px 2px 0 #000,-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000,2px 2px 4px rgba(0,0,0,.8); letter-spacing:1px; margin-right:20px; }
.game-header::before { content:''; position:absolute; top:0; left:0; right:0; bottom:0; background: radial-gradient(circle at 30% 20%, rgba(255,200,0,.2) 0%, transparent 50%), radial-gradient(circle at 70% 80%, rgba(255,100,0,.2) 0%, transparent 50%); pointer-events:none; }
.game-header h1 { font-family:'Bangers',cursive; font-size:5em; font-weight:900; color:#FFD700; text-shadow: var(--ts-comic-heavy, -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000, 4px 4px 8px rgba(0,0,0,.8)); letter-spacing:6px; transform:perspective(800px) rotateX(-3deg) rotateY(-2deg) translateX(-100px); margin:0; position:relative; z-index:5000; filter:drop-shadow(8px 8px 0px #000) drop-shadow(10px 10px 15px rgba(0,0,0,.5)); display:inline-block; text-transform:uppercase; }
.game-info { display:flex; flex-direction:column; gap:10px; font-size:1.1em; font-weight:bold; color:#fff; text-shadow:2px 2px 4px rgba(0,0,0,.8); background: linear-gradient(135deg, #2c1810 0%, #8b4513 50%, #ff6b00 100%); padding:15px 20px; border:4px solid #000; border-radius:0; position:absolute; right:20px; top:50%; transform:translateY(-50%) perspective(400px) rotateX(2deg) rotateZ(-1.5deg); z-index:1; box-shadow:6px 6px 0px #000,8px 8px 20px rgba(0,0,0,.4); background-image: radial-gradient(circle at 3px 3px, rgba(0,0,0,0.15) 1px, transparent 0), linear-gradient(135deg, #2c1810 0%, #8b4513 50%, #ff6b00 100%); background-size:12px 12px, 100% 100%; }
#current-player { font-family:'Bangers',cursive; font-size:2.5em; color:#FFD700; text-shadow:-2px -2px 0 #000,2px -2px 0 #000,-2px 2px 0 #000,2px 2px 0 #000,4px 4px 8px rgba(0,0,0,.8); letter-spacing:1px; position:absolute; top:50%; left:120px; transform:translateY(-50%); z-index:2; }
/* LEGACY ARENA SELECTOR (DEPRECATED - replaced by .cmp-arena + data attributes) */
.game-board { display:block; height:calc(100vh - 140px); margin-top:5px; position:relative; padding:0; overflow:visible; }
/* LEGACY ARENA SELECTOR (DEPRECATED) */
.tokyo-area { position:absolute; left:15px; right:450px; top:10px; height:80%; max-width:none; margin:0; overflow:visible; }
.game-actions { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; }
.game-actions > * { pointer-events:auto; }
.cards-area { position:fixed !important; left:15px; top:10px; bottom:45px; width:430px; z-index:6000; opacity:1; }
.players-area { position:fixed !important; right:15px; top:20px; bottom:15px; width:420px; z-index:6000; overflow:visible; opacity:1; }

/* Roll-off Scoreboard */
.rolloff-scoreboard-container { position:fixed; top:45%; left:50%; transform:translate(-50%, -50%); z-index:1000; background:rgba(0,0,0,.95); border:3px solid #FFD700; border-radius:15px; padding:35px; box-shadow:0 0 30px rgba(255,215,0,.5); max-width:1400px; width:auto; min-width:1000px; }
.rolloff-title { text-align:center; color:#FFD700; font-size:36px; font-weight:bold; margin-bottom:25px; text-shadow:2px 2px 4px rgba(0,0,0,.8); }
.rolloff-commentary { text-align:center; color:#000; font-size:22px; font-style:italic; margin-bottom:20px; min-height:30px; padding:12px; background:rgba(255,215,0,0.1); border-radius:8px; border:1px solid rgba(255,215,0,0.3); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
#rolloff-table { width:100%; border-collapse:collapse; margin-top:15px; table-layout:fixed; }
#rolloff-table th { background:rgba(255,215,0,0.2); color:#FFD700; padding:16px 12px; text-align:center; font-size:20px; font-weight:bold; border:1px solid rgba(255,215,0,0.3); }
#rolloff-table td { padding:20px 12px; border:1px solid rgba(255,255,255,0.2); text-align:center; font-size:18px; }
.rolloff-player-info { display:flex; align-items:center; justify-content:flex-start; text-align:left; }
.rolloff-monster-pic { width:50px; height:50px; border-radius:50%; margin-right:15px; border:2px solid #FFD700; }
.rolloff-player-name { color:#000; font-weight:bold; font-size:20px; flex:1; }
.rolloff-dice-display { display:flex; gap:6px; justify-content:center; align-items:center; min-height:50px; max-height:50px; flex-wrap:wrap; width:240px; overflow:hidden; }
.mini-die { width:35px; height:35px; border:2px solid #333; border-radius:6px; display:flex; align-items:center; justify-content:center; font-size:16px; font-weight:bold; background:linear-gradient(145deg, #f0f0f0, #d0d0d0); box-shadow:2px 2px 4px rgba(0,0,0,.3); color:#333; flex-shrink:0; }
.mini-die.attack { border-color:#FF4444; background:linear-gradient(145deg,#FF6666,#FF4444); color:#fff; box-shadow:0 0 8px rgba(255,68,68,.6); }
.mini-die.rolling { animation:shake3D .6s cubic-bezier(0.68,-0.55,0.265,1.55); }
.rolloff-attack-count { color:#FFD700; font-size:24px; font-weight:bold; text-shadow:2px 2px 4px rgba(0,0,0,.8); }
.rolloff-attack-count.highlight { color:#FF4444; animation:pulseEmphasis 1s ease-in-out; }
.roll-button { background:linear-gradient(45deg,#FFD700,#FFA500); border:none; color:#000; padding:10px 20px; border-radius:8px; font-size:16px; font-weight:bold; cursor:pointer; box-shadow:0 4px 8px rgba(0,0,0,.3); transition:all .3s ease; }
.roll-button:hover { background:linear-gradient(45deg,#FFA500,#FFD700); transform:translateY(-2px); box-shadow:0 6px 12px rgba(0,0,0,.4); }
.roll-button:disabled { background:#666; color:#999; cursor:not-allowed; transform:none; box-shadow:none; }
.action-menu.hidden-for-rolloff { display:none !important; }
@keyframes pulseEmphasis { 0%,100%{transform:scale(1);}50%{transform:scale(1.1);} }

/* Dice overlay */
.dice-area { position:fixed !important; bottom:110px; left:480px; right:460px; height:120px; z-index:4000; margin:0; opacity:1; }
.dice-area.hidden-until-game-start { display:none !important; }
.action-menu { position:fixed !important; bottom:110px; right:50px; width:250px; z-index:4000; margin:0; opacity:1; display:none !important; }
.action-menu.game-active { display:block !important; }
.action-menu.cpu-rolling { filter:grayscale(1); transform:scale(.95); transition:filter .3s ease, transform .3s ease, opacity .3s ease; }
.action-menu.cpu-rolling button { cursor:not-allowed !important; }

.round-indicator-container { position:absolute; top:30px; left:480px; display:flex; align-items:center; gap:10px; z-index:3500; overflow:visible; }
.round-indicator-container .round-label { font-family:'Bangers',cursive; font-size:3em; font-weight:bold; color:#FFD700; text-shadow:-4px -4px 0 #000,4px -4px 0 #000,-4px 4px 0 #000,4px 4px 0 #000,-3px -3px 0 #000,3px -3px 0 #000,-3px 3px 0 #000,3px 3px 0 #000,-2px -2px 0 #000,2px -2px 0 #000,-2px 2px 0 #000,2px 2px 0 #000,-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000,4px 4px 8px rgba(0,0,0,.8); letter-spacing:1px; transform:translateZ(20px) translateX(-15px); }
.round-indicator { background:#E6C200; border:4px solid #000; border-radius:50%; width:60px; height:60px; display:flex; align-items:center; justify-content:center; transform-style:preserve-3d; perspective:1000px; }
.round-indicator #round-counter { font-family:'Bangers',cursive; font-size:24px; font-weight:bold; color:#000; transform:translateZ(20px); }
@keyframes roundGlow { 0%{ box-shadow:0 0 20px rgba(255,215,0,.8), inset 0 0 20px rgba(255,255,255,.3);}100%{ box-shadow:0 0 30px rgba(255,215,0,1), inset 0 0 30px rgba(255,255,255,.5);} }
@keyframes roundSpin { 0%{ transform:rotate(0deg) scale(1); opacity:1;}25%{ transform:rotate(180deg) scale(1.2); opacity:.8;}50%{ transform:rotate(360deg) scale(1.4); opacity:.3;}75%{ transform:rotate(540deg) scale(1.2); opacity:.8;}100%{ transform:rotate(720deg) scale(1); opacity:1; } }
.round-indicator.spinning { animation:roundSpin 1.5s ease-in-out; }

/* Draggable */
.draggable { position:fixed; z-index:2000; border:2px solid #333; border-radius:8px; background:rgba(0,0,0,.9); -webkit-backdrop-filter:blur(5px); backdrop-filter:blur(5px); cursor:move; transition:box-shadow .2s ease; }
.draggable:hover { box-shadow:0 0 15px rgba(255,255,255,.3); }
.draggable.dragging { opacity:.8; transform:rotate(2deg); box-shadow:0 8px 25px rgba(0,0,0,.6); z-index:2100; }
.dice-area.draggable { padding:10px; }
.dice-area.draggable:not([style*="transform"]) { bottom:80px; left:40%; transform:translateX(-50%); }
.action-menu.draggable { padding:10px; display:flex; gap:10px; flex-wrap:wrap; }
.action-menu.draggable:not([style*="transform"]) { bottom:80px; left:65%; transform:translateX(-50%); }

/* Bottom UI Table */
.bottom-ui-table { position:fixed; bottom:0; left:0; right:0; display:flex; flex-direction:column; justify-content:flex-end; z-index:4000; pointer-events:none; }
.ui-row { display:flex; justify-content:center; align-items:center; width:100%; pointer-events:none; }
.notification-row { min-height:40px; padding:5px 0; justify-content:flex-start; padding-left:20px; }
.cpu-action-notification { background:rgba(255,255,255,.7); color:#000; padding:8px 16px; border-radius:4px; font-weight:bold; text-align:center; max-width:60%; box-shadow:0 3px 10px rgba(0,0,0,.4); border:2px solid #000; font-family:'Comic Neue',cursive; pointer-events:auto; }
.action-row { justify-content:space-between; padding:10px 20px; min-height:80px; }
.action-row .dice-area, .action-row .action-menu { pointer-events:auto; position:relative; }
.toolbar-row { justify-content:center; padding:10px 0 15px 0; min-height:60px; }
.toolbar-row .game-toolbar { pointer-events:auto; position:relative !important; transform:none !important; left:auto !important; bottom:auto !important; }

@media (max-width:1200px){ .action-row { padding:10px 15px; } .action-row .dice-area, .action-row .action-menu { max-width:45%; } }
@media (max-width:900px){ .action-row { flex-direction:column; gap:10px; padding:10px; } .action-row .dice-area, .action-row .action-menu { max-width:100%; width:100%; } }
@media (max-width:768px){ .cards-area.collapsible-panel, .players-area.collapsible-panel { transform:translateX(-100%); } .players-area.collapsible-panel { transform:translateX(100%); } .action-row { padding:10px 5px; } }

.game-paused { filter:grayscale(.3) brightness(.8); }
.game-pause-overlay { position:fixed; top:0; left:0; right:0; bottom:90px; background-color:rgba(128,128,128,.6); display:flex; justify-content:center; align-items:center; z-index:7000; pointer-events:none; }
.game-pause-overlay.hidden { display:none; }
.game-pause-overlay:not(.hidden) { pointer-events:auto; }
.pause-message { background-color:rgba(255,255,255,.95); color:#000; padding:30px 50px; border-radius:8px; font-size:32px; font-weight:bold; font-family:'Comic Neue',cursive; text-align:center; border:3px solid #000; box-shadow:0 8px 20px rgba(0,0,0,.5); }
.game-container.game-paused::before { content:"⏸️ GAME PAUSED"; position:fixed; top:20px; left:50%; transform:translateX(-50%); background:rgba(255,140,0,.95); color:#000; padding:8px 16px; border-radius:4px; font-weight:bold; z-index:7100; box-shadow:0 2px 8px rgba(0,0,0,.3); border:2px solid #000; font-family:'Comic Neue',cursive; font-size:14px; pointer-events:none; }
#pause-game-btn.paused { background-color:#4CAF50 !important; border-color:#45a049 !important; }
#pause-game-btn.paused:hover { background-color:#45a049 !important; }

/* === AI LOGIC FLOW REDESIGN === */
.ai-turn-container { background:#f5f5f5; border:3px solid #444; border-radius:12px; margin:15px 0; padding:0; box-shadow:0 4px 8px rgba(0,0,0,.2); overflow:hidden; font-size:16px; color:#333; font-family:Calibri,Arial,sans-serif; }
.ai-turn-header { background:#fff; padding:15px 20px; border-bottom:3px solid #444; display:flex; justify-content:space-between; align-items:center; }
.ai-turn-title h3 { color:#333; margin:0 0 8px 0; font-size:22px; font-weight:bold; font-family:Calibri,Arial,sans-serif; }
.ai-turn-personality { font-size:16px; color:#666; }
.personality-traits { display:flex; flex-direction:column; gap:4px; }
.personality-name { color:#333; font-weight:bold; }
.personality-stats { display:flex; gap:12px; }
.trait-item { font-size:14px; color:#333; }
.ai-turn-player-info { text-align:right; color:#333; }
.ai-player-stats { font-size:16px; margin-bottom:4px; }
.ai-turn-position { font-size:16px; color:#333; }
.ai-turn-summary { background:#f8f9fa; border:1px solid #e0e0e0; padding:10px 20px; border-bottom:1px solid #ddd; }
.ai-turn-stats { display:flex; gap:20px; align-items:center; }
.stat-item { color:#333; font-size:16px; }
.stat-item .roll-count, .stat-item .final-decision, .stat-item .avg-confidence { color:#333; font-weight:bold; margin-left:4px; }
.final-decision.complete { color:#4CAF50; }
.final-decision.rolling { color:#ff9800; }
.ai-turn-rolls { padding:0; }
.ai-roll-entry { background:#fff; border-bottom:2px solid #ddd; padding:15px 20px; }
.ai-roll-entry:last-child { border-bottom:none; }
.ai-roll-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; }
.ai-roll-title { display:flex; align-items:center; gap:12px; }
.roll-number { color:#333; font-weight:bold; font-size:18px; }
.roll-timestamp { color:#666; font-size:14px; }
.decision-badge { padding:6px 14px; border-radius:20px; font-size:14px; font-weight:bold; text-transform:uppercase; border:2px solid; }
.decision-badge.reroll { background:#fff3e0; color:#ff9800; border-color:#ff9800; }
.decision-badge.endroll { background:#e8f5e8; color:#4CAF50; border-color:#4CAF50; }
.ai-logic-die { width:35px; height:35px; border:2px solid #333; border-radius:6px; display:inline-flex; align-items:center; justify-content:center; font-size:16px; font-weight:bold; background:#f0f0f0; box-shadow:2px 2px 4px rgba(0,0,0,.3); color:#333; margin:2px; }
.ai-logic-die.attack { border-color:#FF4444; background:#FF6666; color:#fff; box-shadow:0 0 8px rgba(255,68,68,.6); }
.ai-logic-die.energy { border-color:#B8860B; background:#DAA520; color:#333; box-shadow:0 0 8px rgba(184,134,11,.6); }
.ai-logic-die.heal { border-color:#4CAF50; background:#81C784; color:#fff; box-shadow:0 0 8px rgba(76,175,80,.6); }
.ai-logic-die.vp { border-color:#9C27B0; background:#BA68C8; color:#fff; box-shadow:0 0 8px rgba(156,39,176,.6); }
.ai-logic-die.selected { border-color:#2196F3; background:#64B5F6; box-shadow:0 0 10px rgba(33,150,243,.8); }
.decision-badge.keep, .decision-badge.endroll { background:#4CAF50; color:#fff; }
.ai-roll-dice { margin:12px 0; }
.dice-outcome { margin-bottom:8px; }
.dice-outcome strong, .dice-kept strong { color:#333; font-size:16px; }
.dice-kept { font-size:16px; color:#333; }
.kept-die { display:inline-block; margin-right:4px; color:#4CAF50; font-weight:bold; font-size:16px; }
.ai-roll-analysis { margin-top:15px; }
.ai-reasoning { margin-bottom:15px; }
.ai-reasoning strong { color:#333; font-size:16px; }
.ai-reasoning p { color:#333; margin:4px 0; font-size:15px; line-height:1.4; }
.ai-probability-analysis, .ai-strategic-analysis { background:#fff; border:2px solid #ddd; border-radius:6px; padding:12px; margin:15px 0; }
.ai-probability-analysis strong, .ai-strategic-analysis strong { color:#333; font-size:16px; }
.probability-breakdown { margin-top:8px; }
.current-value { color:#333; font-size:15px; margin-bottom:8px; }
.improvement-chances { display:flex; flex-direction:column; gap:6px; }
.improvement-item { display:flex; align-items:center; gap:8px; font-size:15px; background:#f8f9fa; border:1px solid #e0e0e0; border-radius:4px; padding:6px 8px; }
.improvement-type { color:#333; min-width:120px; font-size:15px; }
.improvement-probability { color:#333; font-weight:bold; min-width:35px; font-size:15px; }
.probability-bar { flex:1; height:14px; background:#e0e0e0; border:2px solid #ccc; border-radius:4px; overflow:hidden; max-width:100px; }
.probability-fill { height:100%; transition:width .3s ease; }
.probability-low { background:#f44336 !important; }
.probability-medium { background:#ff9800 !important; }
.probability-high { background:#4CAF50 !important; }
.strategic-points { list-style:none; padding:0; margin:8px 0; }
.strategic-points li { color:#333; font-size:15px; margin:4px 0; padding:6px 8px; background:#f8f9fa; border:1px solid #e0e0e0; border-radius:4px; line-height:1.3; }
.ai-confidence-meter { margin-top:15px; display:flex; align-items:center; gap:12px; background:#f8f9fa; border:1px solid #e0e0e0; border-radius:4px; padding:8px; }
.ai-confidence-meter strong { color:#333; font-size:16px; min-width:80px; }
.confidence-bar { flex:1; height:14px; background:#e0e0e0; border:2px solid #ccc; border-radius:6px; overflow:hidden; max-width:150px; }
.confidence-fill { height:100%; transition:width .3s ease; }
.confidence-low { background:#f44336 !important; }
.confidence-medium { background:#ff9800 !important; }
.confidence-high { background:#4CAF50 !important; }
.confidence-text { color:#333; font-weight:bold; font-size:15px; min-width:35px; }
#ai-log-content * { font-size:inherit !important; font-family:Calibri,Arial,sans-serif !important; }
#ai-log-content { font-size:16px !important; line-height:1.4 !important; font-family:Calibri,Arial,sans-serif !important; }
.ai-section-title { color:#333 !important; font-size:16px !important; font-weight:bold !important; margin:8px 0 !important; }
.ai-text-primary { color:#333 !important; font-size:15px !important; }
.ai-text-secondary { color:#666 !important; font-size:15px !important; }
.ai-text-accent { color:#333 !important; font-size:15px !important; font-weight:bold !important; }
.ai-reasoning-text { color:#333 !important; font-size:15px !important; line-height:1.4 !important; margin:4px 0 !important; }
.ai-metric-value { color:#333 !important; font-weight:bold !important; font-size:15px !important; }
@media (max-width:768px){ .ai-turn-header { flex-direction:column; align-items:flex-start; gap:10px; } .ai-turn-player-info { text-align:left; } .ai-turn-stats { flex-wrap:wrap; gap:10px; } .ai-roll-header { flex-direction:column; align-items:flex-start; gap:8px; } .improvement-item { flex-wrap:wrap; } .ai-confidence-meter { flex-wrap:wrap; } }
.center-notification { position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); z-index:10000; background:rgba(255,255,255,.9); color:#333; padding:20px 30px; border-radius:8px; border:2px solid #333; font-size:18px; font-weight:normal; text-align:center; opacity:0; visibility:hidden; transition:all .3s ease; max-width:80%; word-wrap:break-word; }
.center-notification.visible { opacity:1; visibility:visible; }

/* End of transplanted layout.css */

/* --- Temporary panel fallback styles for rewrite components (can remove after full migration) --- */
.players-area.collapsible-panel, .cards-area.collapsible-panel { background:rgba(0,0,0,.85); border:2px solid #222; border-radius:4px; backdrop-filter:blur(4px); }
.players-area.collapsible-panel .panel-header, .cards-area.collapsible-panel .panel-header { position:relative; user-select:none; }
.players-area.collapsible-panel .toggle-arrow, .cards-area.collapsible-panel .toggle-arrow { display:inline-block; transition:transform .25s ease; }
.players-area.collapsible-panel.collapsed .toggle-arrow, .cards-area.collapsible-panel.collapsed .toggle-arrow { transform:rotate(-90deg); }
.players-area .panel-header, .cards-area .panel-header { font-family:'Bangers',cursive; font-size:1.1rem; letter-spacing:1px; padding:8px 12px; margin:0; color:#fff; cursor:pointer; display:flex; align-items:center; justify-content:space-between; }
.players-area .panel-content, .cards-area .panel-content { padding:6px 10px 10px; max-height:60vh; overflow:auto; }
.players-area.collapsed .panel-content, .cards-area.collapsed .panel-content { display:none; }

/* --- Enhanced full-panel collapse with vertical header text (legacy parity) --- */
.monsters-panel.collapsible-panel { transition:width .3s ease, padding .3s ease; }
.card-shop-panel.collapsible-panel { transition:width .3s ease, padding .3s ease; }

/* Base explicit widths so animation has a start/end target (may be overridden by responsive rules) */
.monsters-panel.collapsible-panel:not(.monsters-collapsed) { width:300px; }
.card-shop-panel.collapsible-panel:not(.cards-collapsed) { width:320px; }

/* Collapsed states shrink panel and hide content visually */
.monsters-panel.collapsible-panel.monsters-collapsed { width:60px; padding:15px 10px; overflow:hidden; }
.card-shop-panel.collapsible-panel.cards-collapsed { width:60px; padding:15px 10px; overflow:hidden; }

/* Rotate header text vertically when collapsed (mirrors legacy rotate rules) */
.monsters-panel.monsters-collapsed .panel-header .header-text { transform:rotate(-90deg) translateX(-30px); transform-origin:center; white-space:nowrap; margin-top:20px; display:inline-block; }
.card-shop-panel.cards-collapsed .panel-header .header-text { transform:rotate(90deg) translateX(30px); transform-origin:center; white-space:nowrap; margin-top:20px; display:inline-block; }

/* Ensure arrow always visible when collapsed */
.monsters-panel.monsters-collapsed .toggle-arrow, .card-shop-panel.cards-collapsed .toggle-arrow { opacity:1; }

/* Hide panel content via zero sizing for smoother transitions */
.monsters-panel.monsters-collapsed .panel-content, .card-shop-panel.cards-collapsed .panel-content { width:0; height:0; opacity:0; margin:0; padding:0; overflow:hidden; }

/* Provide smooth fade/size transition for panel content (when expanding) */
.monsters-panel .panel-content, .card-shop-panel .panel-content { transition:opacity .25s ease, width .25s ease, height .25s ease; }

/* Draggable visual feedback */
.monsters-panel[data-draggable="true"], .card-shop-panel[data-draggable="true"] { cursor:move; }
.players-area .player-card { display:flex; gap:6px; font-size:.8rem; padding:4px 6px; border-bottom:1px solid rgba(255,255,255,.08); color:#fff; font-family:Arial,sans-serif; }
.players-area .player-card:last-child { border-bottom:none; }
.players-area .player-card .tokyo { color:#FFD700; font-weight:bold; }

/* Fallback arena visuals (rewrite) */
.cmp-arena.game-board { position:relative; min-height:60vh; border:2px solid #222; background:rgba(0,0,0,.4); box-shadow:0 0 20px rgba(0,0,0,.6) inset; }
.cmp-arena .tokyo-area { position:absolute; top:20px; left:50%; transform:translateX(-50%); width:60%; min-height:300px; display:flex; gap:40px; justify-content:center; }
.cmp-arena .tokyo-bay, .cmp-arena .tokyo-city { flex:1; background:rgba(0,0,0,.55); border:2px solid #333; padding:10px; border-radius:6px; text-align:center; }
.cmp-arena .monster-slot { height:140px; border:2px dashed #555; border-radius:4px; margin-top:10px; }
.cmp-arena .round-indicator-container { position:absolute; top:-10px; right:-120px; }

/* Action Menu & Toolbar (rewrite) */
.cmp-action-menu.action-menu { position:fixed; bottom:140px; right:40px; display:flex; gap:8px; background:rgba(0,0,0,.85); padding:10px 14px; border:2px solid #333; border-radius:8px; box-shadow:0 4px 18px rgba(0,0,0,.6); }
.cmp-action-menu.action-menu button { font-family:'Bangers',cursive; letter-spacing:1px; }
.cmp-toolbar.game-toolbar { position:fixed; bottom:60px; left:50%; transform:translateX(-50%); display:flex; gap:10px; background:rgba(0,0,0,.85); padding:8px 14px; border:2px solid #333; border-radius:8px; box-shadow:0 4px 18px rgba(0,0,0,.6); }
.cmp-toolbar .toolbar-btn { font-size:20px; line-height:1; background:transparent; border:none; cursor:pointer; color:#ddd; padding:4px 8px; }
.cmp-toolbar .toolbar-btn:hover { color:#fff; text-shadow:0 0 6px rgba(255,255,255,.6); }
.tokyo-occupant { display:flex; flex-direction:column; gap:2px; font-size:.75rem; background:rgba(0,0,0,.6); border:1px solid #444; padding:4px 6px; border-radius:4px; color:#eee; }
.slot-empty { font-size:.7rem; color:#777; font-style:italic; }

/* Dice tray parity refinements */
.cmp-dice-tray.dice-area { background:rgba(0,0,0,.85); padding:10px 16px; border:2px solid #333; border-radius:8px; box-shadow:0 4px 14px rgba(0,0,0,.5); display:inline-block; }
.cmp-dice-tray .tray-header { display:flex; align-items:center; gap:12px; margin-bottom:6px; }
.cmp-dice-tray .tray-header button { font-family:'Bangers',cursive; letter-spacing:1px; }
.cmp-dice-tray [data-dice] { display:flex; gap:8px; }
.cmp-dice-tray .die { width:44px; height:44px; display:flex; align-items:center; justify-content:center; font-size:22px; font-weight:bold; background:linear-gradient(145deg,#2d2d2d,#111); color:#fff; border:2px solid #555; border-radius:8px; cursor:pointer; transition:transform .25s cubic-bezier(.175,.885,.32,1.275), box-shadow .25s; position:relative; }
.cmp-dice-tray .die.is-kept { border-color:#FFD700; box-shadow:0 0 10px rgba(255,215,0,.6); }
.cmp-dice-tray .die.extra-die { background:linear-gradient(145deg,#313a55,#181d2b); }
.cmp-dice-tray .die.pending { opacity:.35; font-size:18px; }
.cmp-dice-tray [data-dice].rolling .die { animation:dieRollFlash .6s ease; }
@keyframes dieRollFlash { 0%{transform:scale(1) rotate(0deg);} 30%{transform:scale(1.25) rotate(90deg);} 60%{transform:scale(.9) rotate(180deg);} 100%{transform:scale(1) rotate(360deg);} }
.cmp-dice-tray .die.new-die { animation:newDiePulse 1s ease; }
@keyframes newDiePulse { 0%{box-shadow:0 0 0 rgba(0,255,255,0);} 50%{box-shadow:0 0 14px rgba(0,255,255,.8);} 100%{box-shadow:0 0 0 rgba(0,255,255,0);} }
.cmp-dice-tray.for-active-player { box-shadow:0 0 12px rgba(255,215,0,.35); border-color:#555; }

/* Hide dice tray under splash (splash sets ui.splash.visible true) */
body.splash-visible .cmp-dice-tray { visibility:hidden; opacity:0; transition:opacity .3s ease; }
body:not(.splash-visible) .cmp-dice-tray { visibility:visible; opacity:1; }

/* Player profile cards rail (basic) */
.cmp-player-profile-cards { position:fixed; left:50px; top:120px; display:flex; flex-direction:column; gap:12px; z-index:3000; }
.cmp-player-profile-card { background:rgba(0,0,0,.8); border:2px solid #333; border-radius:8px; padding:10px 14px; width:220px; font-size:.8rem; color:#eee; font-family:Arial,sans-serif; box-shadow:0 4px 14px rgba(0,0,0,.5); }
.cmp-player-profile-card.is-active { outline:2px solid #FFD700; box-shadow:0 0 12px rgba(255,215,0,.4); }
.cmp-player-profile-card .ppc-header { display:flex; align-items:center; gap:10px; margin-bottom:4px; }
.cmp-player-profile-card .ppc-name { font-family:'Bangers',cursive; font-size:1.1rem; letter-spacing:1px; }
.cmp-player-profile-card .ppc-stats { display:flex; gap:8px; margin:4px 0 6px; }
.cmp-player-profile-card .ppc-stat { display:flex; flex-direction:column; align-items:center; background:#111; padding:4px 6px; border:1px solid #444; border-radius:4px; min-width:45px; }
.cmp-player-profile-card .ppc-stat .label { font-size:.55rem; color:#bbb; }
.cmp-player-profile-card .ppc-stat .value { font-size:.95rem; font-weight:bold; }
.cmp-player-profile-card .ppc-owned-cards-label { font-size:.55rem; text-transform:uppercase; letter-spacing:1px; opacity:.7; }
.cmp-player-profile-card .ppc-owned-cards-strip { display:flex; gap:4px; flex-wrap:wrap; }
.cmp-player-profile-card .ppc-card-mini { background:#222; padding:2px 4px; border-radius:3px; font-size:.55rem; border:1px solid #444; }

