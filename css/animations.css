/* Animations and Effects */

/* Loading and transition effects */
.fade-in {
    animation: fadeIn 0.5s ease-in;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.pulse {
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.game-board {
    animation: slideInUp 0.8s ease-out;
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Enhanced visual effects */
.monster-avatar {
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-3px);
    }
}

/* Tokyo animations */
.tokyo-animation {
    border: 3px solid #FFD700;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
    border-radius: 8px;
}

.monster-slot.entering-tokyo {
    animation: tokyoGlow 1s ease-in-out;
}

@keyframes tokyoGlow {
    0% { box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.3); }
    50% { box-shadow: 0 0 30px var(--monster-glow-strong, rgba(255, 215, 0, 0.8)), 4px 4px 8px rgba(0, 0, 0, 0.3); }
    100% { box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.3); }
}

.tokyo-monster {
    animation: tokyoEnter 0.5s ease-out;
}

@keyframes tokyoEnter {
    0% { 
        opacity: 0; 
        transform: scale(0.5) translateY(-20px); 
    }
    100% { 
        opacity: 1; 
        transform: scale(1) translateY(0); 
    }
}

.leaving-tokyo {
    animation: tokyoExit 0.8s ease-in-out forwards;
}

@keyframes tokyoExit {
    0% { 
        opacity: 1; 
        transform: scale(1) translateY(0); 
    }
    100% { 
        opacity: 0; 
        transform: scale(0.8) translateY(-30px); 
    }
}

/* Comic Effect Animations */
.comic-effect {
    position: fixed;
    font-family: 'Bangers', cursive;
    font-weight: 900;
    pointer-events: none;
    z-index: 1000;
    animation: comicPop 1.5s ease-out forwards;
}

.comic-pow {
    font-size: 4em;
    color: #FF0000;
    text-shadow: 
        -4px -4px 0 #000,
        4px -4px 0 #000,
        -4px 4px 0 #000,
        4px 4px 0 #000;
    transform: rotate(-10deg);
}

.comic-boom {
    font-size: 5em;
    background: linear-gradient(45deg, #FF4500, #FFD700, #FF8C00);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 
        -3px -3px 0 #000,
        3px -3px 0 #000,
        -3px 3px 0 #000,
        3px 3px 0 #000;
    transform: rotate(5deg);
}

.comic-smash {
    font-size: 4.5em;
    color: #DC143C;
    text-shadow: 
        -3px -3px 0 #000,
        3px -3px 0 #000,
        -3px 3px 0 #000,
        3px 3px 0 #000;
    transform: rotate(-15deg);
}

.comic-zap {
    font-size: 3.5em;
    background: linear-gradient(45deg, #00BFFF, #FFD700, #FFFF00);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 
        -2px -2px 0 #000,
        2px -2px 0 #000,
        -2px 2px 0 #000,
        2px 2px 0 #000;
    transform: rotate(8deg);
}

@keyframes comicPop {
    0% {
        opacity: 0;
        transform: scale(0.3) rotate(0deg);
        filter: blur(4px);
    }
    20% {
        opacity: 1;
        transform: scale(1.5) rotate(var(--rotation, 0deg));
        filter: blur(0px);
    }
    50% {
        transform: scale(1.2) rotate(var(--rotation, 0deg));
    }
    80% {
        opacity: 1;
        transform: scale(1) rotate(var(--rotation, 0deg));
    }
    100% {
        opacity: 0;
        transform: scale(0.8) rotate(var(--rotation, 0deg));
    }
}

/* Comic Book Panels Background */
.comic-panels {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: -1;
    opacity: 0.1;
}

.comic-panel {
    position: absolute;
    border: 4px solid #000;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 15px;
    padding: 20px;
    font-family: 'Bangers', cursive;
    color: #000;
    font-size: 1.2em;
    box-shadow: 6px 6px 0px #000;
}

.comic-panel-1 {
    top: 10%;
    left: 5%;
    width: 200px;
    height: 120px;
    transform: rotate(-5deg);
}

.comic-panel-2 {
    top: 15%;
    right: 8%;
    width: 180px;
    height: 100px;
    transform: rotate(3deg);
}

.comic-panel-3 {
    bottom: 20%;
    left: 10%;
    width: 190px;
    height: 110px;
    transform: rotate(2deg);
}

.comic-panel-4 {
    bottom: 25%;
    right: 12%;
    width: 170px;
    height: 90px;
    transform: rotate(-3deg);
}

.speech-bubble {
    position: relative;
    background: white;
    border: 3px solid #000;
    border-radius: 20px;
    padding: 10px 15px;
    margin: 10px 0;
    font-size: 0.9em;
    font-weight: 900;
    text-align: center;
}

.speech-bubble::before {
    content: "";
    position: absolute;
    bottom: -15px;
    left: 30px;
    width: 0;
    height: 0;
    border: 8px solid transparent;
    border-top-color: #000;
    border-bottom: 0;
}

.speech-bubble::after {
    content: "";
    position: absolute;
    bottom: -12px;
    left: 32px;
    width: 0;
    height: 0;
    border: 6px solid transparent;
    border-top-color: white;
    border-bottom: 0;
}

.monster-icon {
    font-size: 2em;
    text-align: center;
    margin-bottom: 5px;
}

/* Animation effects for game events */
@keyframes heartBeat {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); color: #FF69B4; }
    100% { transform: scale(1); }
}

@keyframes energyZap {
    0% { transform: scale(1); box-shadow: 0 0 0 rgba(255, 255, 0, 0); }
    50% { transform: scale(1.2); box-shadow: 0 0 20px rgba(255, 255, 0, 0.8); }
    100% { transform: scale(1); box-shadow: 0 0 0 rgba(255, 255, 0, 0); }
}

@keyframes pointsCounter {
    0% { transform: scale(1) rotate(0deg); }
    25% { transform: scale(1.1) rotate(2deg); }
    50% { transform: scale(1.2) rotate(-2deg); }
    75% { transform: scale(1.1) rotate(1deg); }
    100% { transform: scale(1) rotate(0deg); }
}

@keyframes explosion {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.5); opacity: 1; }
    100% { transform: scale(2); opacity: 0; }
}

.heal-effect {
    animation: heartBeat 0.8s ease-in-out;
}

.energy-effect {
    animation: energyZap 0.6s ease-in-out;
}

.points-effect {
    animation: pointsCounter 0.5s ease-in-out;
}

.explosion-effect {
    animation: explosion 1s ease-out;
    position: absolute;
    font-size: 4em;
    color: #FF4500;
    pointer-events: none;
    z-index: 1000;
}

/* Attack animations - shake and red glow */
@keyframes attackShake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
    20%, 40%, 60%, 80% { transform: translateX(3px); }
}

@keyframes attackGlow {
    0% { 
        box-shadow: 0 0 0 rgba(255, 0, 0, 0);
        border-color: transparent;
    }
    50% { 
        box-shadow: 0 0 20px rgba(255, 0, 0, 0.8), 0 0 40px rgba(255, 0, 0, 0.6);
        border-color: #ff0000;
    }
    100% { 
        box-shadow: 0 0 0 rgba(255, 0, 0, 0);
        border-color: transparent;
    }
}

.player-attacked {
    animation: attackShake 0.6s ease-in-out, attackGlow 1s ease-in-out;
    border: 2px solid transparent;
}

/* Rumble animation (intro) - reuse shake without glow */
.player-rumble {
    animation: attackShake 0.6s ease-in-out;
}

/* Intro Thought Bubble Effects */
.intro-effect { position:absolute; inset:0; pointer-events:none; z-index:1500; overflow:hidden; }
.game-board .intro-effect { position:fixed; top:0; left:0; width:100%; height:100%; }

/* Party (balloons + confetti) */
.intro-effect-party { background: radial-gradient(circle at 50% 60%, rgba(0,0,0,0.55), rgba(0,0,0,0.85)); -webkit-backdrop-filter: blur(2px); backdrop-filter: blur(2px); }
.intro-effect-party.intro-effect-fade { animation: fadeOutOverlay .8s forwards; }
.balloon { position:absolute; bottom:-120px; width:46px; height:58px; background:var(--balloon-color,linear-gradient(135deg,#ff9a9e,#fad0c4)); border-radius:50% 50% 45% 45%; box-shadow:0 4px 8px rgba(0,0,0,0.3); animation: balloonRise 6s linear forwards; }
.balloon::after { content:''; position:absolute; bottom:-18px; left:50%; width:2px; height:22px; background:#fff; transform:translateX(-50%); }
.balloon:nth-child(odd){ --balloon-color:linear-gradient(135deg,#a1c4fd,#c2e9fb);} 
.balloon:nth-child(3n){ --balloon-color:linear-gradient(135deg,#fddb92,#d1fdff);} 
.balloon:nth-child(4n){ --balloon-color:linear-gradient(135deg,#e0c3fc,#8ec5fc);} 
.confetti { position:absolute; top:-10px; width:10px; height:14px; background:#FF4757; animation: confettiFall 3.2s linear forwards; transform: rotate(0deg); }
.confetti:nth-child(3n){ width:8px; height:12px; }
.confetti:nth-child(4n){ border-radius:50%; }

@keyframes balloonRise { 0%{ transform:translateY(0) scale(.9); opacity:0;} 10%{opacity:1;} 85%{opacity:1;} 100%{ transform:translateY(-120vh) scale(1); opacity:0;} }
@keyframes confettiFall { 0%{ transform:translateY(0) rotate(0deg);} 100%{ transform:translateY(110vh) rotate(540deg); opacity:0;} }
@keyframes fadeOutOverlay { to { opacity:0; } }

/* Showtime (spotlights) */
.intro-effect-showtime { background:#000; }
.intro-effect-showtime .spotlight { position:absolute; top:0; width:55%; height:150%; background:radial-gradient(ellipse at top, rgba(255,255,200,0.85), rgba(255,255,200,0.15) 60%, rgba(0,0,0,0) 75%); mix-blend-mode:screen; opacity:0; transform-origin:top center; }
.spotlight-left { left:-10%; animation: spotlightSweepLeft .9s ease-out forwards; }
.spotlight-right { right:-10%; animation: spotlightSweepRight .9s ease-out forwards; }
.intro-effect-showtime.lights-on { background:rgba(0,0,0,0.35); transition:background .4s ease; }
@keyframes spotlightSweepLeft { 0%{ transform:rotate(-35deg) scale(0.6); opacity:0;} 30%{opacity:1;} 100%{ transform:rotate(-5deg) scale(1); opacity:1;} }
@keyframes spotlightSweepRight { 0%{ transform:rotate(35deg) scale(0.6); opacity:0;} 30%{opacity:1;} 100%{ transform:rotate(5deg) scale(1); opacity:1;} }

/* Dawn transition */
.intro-effect-dawn { background: linear-gradient(#020617,#0f172a); animation: dawnCycle 3s ease-in-out forwards; }
@keyframes dawnCycle {
    0% { background:linear-gradient(#020617,#0f172a); filter:brightness(.5) saturate(.7); }
    25% { background:linear-gradient(#0a2540,#1e3a8a); filter:brightness(.7) saturate(.85); }
    55% { background:linear-gradient(#1e3a8a,#2563eb); filter:brightness(.9) saturate(.95); }
    75% { background:linear-gradient(#2563eb,#60a5fa); filter:brightness(1) saturate(1); }
    100% { background:linear-gradient(#60a5fa,#93c5fd); filter:brightness(1.05) saturate(1.05); }
}


/* Heart healing animation */
@keyframes heartFloat {
    0% {
        opacity: 0;
        transform: scale(0.5) translateY(50px);
    }
    20% {
        opacity: 1;
        transform: scale(1.2) translateY(0px);
    }
    50% {
        opacity: 1;
        transform: scale(1) translateY(-10px);
    }
    80% {
        opacity: 1;
        transform: scale(0.8) translateY(-5px);
    }
    100% {
        opacity: 0;
        transform: scale(0.5) translateY(-20px);
    }
}

@keyframes healthIncrease {
    0% { 
        transform: scale(1);
        color: inherit;
    }
    50% { 
        transform: scale(1.3);
        color: #ff69b4;
        text-shadow: 0 0 10px rgba(255, 105, 180, 0.8);
    }
    100% { 
        transform: scale(1);
        color: inherit;
        text-shadow: none;
    }
}

.healing-heart {
    position: absolute;
    font-size: 2em;
    color: #ff69b4;
    pointer-events: none;
    z-index: 1000;
    animation: heartFloat 1.5s ease-out forwards;
}

.health-stat-increase {
    animation: healthIncrease 0.8s ease-in-out;
}

/* Victory point coin animation */
@keyframes coinSpin {
    0% {
        opacity: 0;
        transform: scale(0.5) rotateY(0deg) translateY(30px);
    }
    20% {
        opacity: 1;
        transform: scale(1.2) rotateY(180deg) translateY(-20px);
    }
    40% {
        transform: scale(1) rotateY(360deg) translateY(-30px);
    }
    60% {
        transform: scale(1.1) rotateY(540deg) translateY(-25px);
    }
    70% {
        transform: scale(0.9) rotateY(720deg) translateY(-15px);
    }
    85% {
        transform: scale(1.05) rotateY(900deg) translateY(-10px);
    }
    100% {
        opacity: 0;
        transform: scale(0.8) rotateY(1080deg) translateY(-5px);
    }
}

@keyframes coinBounce {
    0%, 100% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-8px);
    }
}

@keyframes pointsIncrease {
    0% { 
        transform: scale(1);
        color: inherit;
    }
    50% { 
        transform: scale(1.4);
        color: #ffd700;
        text-shadow: 0 0 15px rgba(255, 215, 0, 0.9);
    }
    100% { 
        transform: scale(1);
        color: inherit;
        text-shadow: none;
    }
}

.victory-coin {
    position: absolute;
    font-size: 2.5em;
    color: #ffd700;
    pointer-events: none;
    z-index: 1000;
    animation: coinSpin 2s ease-out forwards;
}

.victory-coin.bouncing {
    animation: coinSpin 1.5s ease-out forwards, coinBounce 0.3s ease-in-out 1.2s;
}

.points-stat-increase {
    animation: pointsIncrease 0.8s ease-in-out;
}
