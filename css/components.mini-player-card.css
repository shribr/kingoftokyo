/**
 * Mini Player Cards Component - Rectangular Catan-style
 * Compact horizontal player displays with visible stats
 * Shows 6 positions (4 corners + 2 top title positions)
 */

/* Container */
.cmp-mini-player-cards {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9500; /* Below unleash/modal screens (12000) and replay overlay (9999) */
}

/* Container for card + name label */
.mini-player-card-container {
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  pointer-events: auto;
}

/* Player name label under card */
.mini-player-card-name {
  font-family: 'Bangers', cursive;
  font-size: 12px;
  color: #ffefa5;
  text-align: center;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  margin-top: 4px;
  white-space: nowrap;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.mini-player-card-name--empty {
  color: #888;
  opacity: 0.6;
  font-style: italic;
}

.mini-player-card-name--active {
  color: #fff;
  text-shadow: 0 0 4px #ffefa5, 1px 1px 2px rgba(0,0,0,0.8);
}

/* Base card styling - rectangular horizontal card */
.mini-player-card {
  position: relative; /* Changed from absolute since container handles positioning */
  width: 120px; /* Reduced from 140px for more compact layout */
  height: 60px; /* Reduced from 70px for more compact layout */
  pointer-events: auto;
  transition: all 0.3s ease;
  z-index: 9500; /* Below unleash/modal screens (12000) and replay overlay (9999) */
  opacity: 1; /* Ensure full opacity */
}

/* Card inner container */
.mpc-card-inner {
  width: 100%;
  height: 100%;
  border: 2px solid #000;
  border-radius: 0; /* No rounded corners */
  box-shadow: 0 2px 6px rgba(0,0,0,0.4);
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 3px 6px; /* Reduced padding for more compact layout */
  cursor: pointer;
  position: relative;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  opacity: 1 !important; /* Force full opacity */
  overflow: visible; /* Ensure children aren't clipped */
}

.mpc-card-inner:hover,
.mpc-card-inner:active {
  transform: scale(1.05);
  box-shadow: 0 4px 10px rgba(0,0,0,0.5);
  opacity: 1 !important; /* Force full opacity */
}

/* Monster-specific hover/touch border colors */
.mini-player-card[data-monster="alienoid"] .mpc-card-inner:hover,
.mini-player-card[data-monster="alienoid"] .mpc-card-inner:active {
  border-color: #1496b4 !important;
}

.mini-player-card[data-monster="cyberbunny"] .mpc-card-inner:hover,
.mini-player-card[data-monster="cyberbunny"] .mpc-card-inner:active {
  border-color: #f472b6 !important;
}

.mini-player-card[data-monster="cyber-kitty"] .mpc-card-inner:hover,
.mini-player-card[data-monster="cyber-kitty"] .mpc-card-inner:active {
  border-color: #ec4899 !important;
}

.mini-player-card[data-monster="gigazaur"] .mpc-card-inner:hover,
.mini-player-card[data-monster="gigazaur"] .mpc-card-inner:active {
  border-color: #22c55e !important;
}

.mini-player-card[data-monster="kraken"] .mpc-card-inner:hover,
.mini-player-card[data-monster="kraken"] .mpc-card-inner:active {
  border-color: #3b82f6 !important;
}

.mini-player-card[data-monster="meka-dragon"] .mpc-card-inner:hover,
.mini-player-card[data-monster="meka-dragon"] .mpc-card-inner:active {
  border-color: #a3a3a3 !important;
}

.mini-player-card[data-monster="space-penguin"] .mpc-card-inner:hover,
.mini-player-card[data-monster="space-penguin"] .mpc-card-inner:active {
  border-color: #38bdf8 !important;
}

.mini-player-card[data-monster="the-king"] .mpc-card-inner:hover,
.mini-player-card[data-monster="the-king"] .mpc-card-inner:active {
  border-color: #f59e0b !important;
}

/* Active player indicator - circular dice badge positioned outside card within container */
.mpc-active-indicator {
  position: absolute;
  width: 24px;
  height: 24px;
  background: #fff;
  border: 2px solid #000;
  border-radius: 50%; /* Make it circular */
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9501; /* One level above mini player cards (9500) */
  pointer-events: none; /* Don't interfere with card clicks */
  box-shadow: 0 2px 4px rgba(0,0,0,0.5);
}

.mpc-active-indicator::before {
  content: 'ðŸŽ²';
  font-size: 12px;
  line-height: 1;
}

/* Profile image - square on left side, zoomed to show headshot */
.mpc-profile {
  width: 40px;
  height: 40px;
  border-radius: 0; /* No rounded corners */
  background-color: #fff; /* White background for headshots */
  background-size: 150%; /* Zoom in to show headshot area */
  background-position: center 20%; /* Focus on upper portion (head) */
  border: 2px solid rgba(0,0,0,0.3);
  flex-shrink: 0;
}

/* Stats bar - 2x2 grid next to profile */
.mpc-stats-bar {
  display: grid;
  grid-template-columns: 1fr 1fr; /* 2 columns */
  grid-template-rows: 1fr 1fr; /* 2 rows */
  gap: 2px 1px; /* vertical gap, horizontal gap */
  flex: 0 0 auto; /* Don't grow or shrink, use natural size */
  min-width: 0;
  width: 60px; /* Fixed width for consistent layout */
}

/* Individual stat - horizontal row */
.mpc-stat {
  display: flex;
  align-items: center;
  gap: 2px; /* Reduced gap for tighter layout */
  font-size: 8px;
  font-weight: 600;
  color: #fff;
}

.mpc-stat-icon {
  font-size: 9px;
  flex-shrink: 0;
}

.mpc-stat-value {
  color: #fff;
  font-family: 'Bangers', cursive;
  font-size: 11px;
  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
}

/* Player name - absolute positioned at bottom */
.mpc-name {
  position: absolute;
  bottom: -14px;
  left: 0;
  right: 0;
  text-align: center;
  font-size: 8px;
  font-weight: 600;
  color: rgba(255,255,255,0.9);
  text-shadow: 0 1px 2px rgba(0,0,0,0.5);
  white-space: nowrap;
  max-width: 110px;
  overflow: hidden;
  text-overflow: ellipsis;
  z-index: 1;
}

/* Empty slot styling - clearly grayed out and inactive */
.mini-player-card--empty {
  opacity: 0.4; /* More subdued appearance */
  pointer-events: none;
  z-index: 9500; /* Same as other cards */
  filter: grayscale(1) brightness(0.7); /* Desaturated and darker */
}

/* Ensure non-empty cards are fully opaque and colorful */
.mini-player-card:not(.mini-player-card--empty) {
  opacity: 1 !important;
  z-index: 9500; /* Below unleash/modal screens (12000) and replay overlay (9999) */
  filter: none; /* Ensure no filters applied to active cards */
}

.mini-player-card--empty .mpc-card-inner {
  background: #555 !important; /* Darker gray for clear inactive look */
  border-color: rgba(255,255,255,0.15) !important;
  border-width: 1px !important;
  border-style: dashed !important; /* Dashed border to indicate inactive */
}

.mini-player-card--empty .mpc-profile {
  background: #444 !important; /* Even darker gray for empty profile */
  border-color: rgba(255,255,255,0.1) !important;
  opacity: 0.6;
}

/* Empty card stat values and icons are heavily dimmed */
.mini-player-card--empty .mpc-stat-value,
.mini-player-card--empty .mpc-stat-icon {
  opacity: 0.3;
  color: #888 !important;
}

/* Empty card name styling */
.mini-player-card--empty .mpc-name {
  opacity: 0.4;
  color: #888 !important;
  font-style: italic;
}

/* Position variants - 6 slots: 4 corners + 2 middle sides */
/* Container positioning (includes card + name) */
.mini-player-card-container--top-left {
  top: 8px; /* Close to perimeter */
  left: 8px;
}

.mini-player-card-container--top-left-title {
  top: 50%; /* Middle left side */
  left: 8px;
  transform: translateY(-50%);
}

.mini-player-card-container--top-right-title {
  top: 50%; /* Middle right side where radial launcher was */
  right: 8px;
  transform: translateY(-50%);
}

.mini-player-card-container--top-right {
  top: 8px; /* Close to perimeter */
  right: 8px; /* Same distance as left side for symmetry */
}

.mini-player-card-container--bottom-left {
  bottom: 8px; /* Match edge spacing - adjusted for name label */
  left: 8px;
}

.mini-player-card-container--bottom-right {
  bottom: 8px; /* Match edge spacing - adjusted for name label */
  right: 8px;
}

/* Legacy positioning for backward compatibility (if any other code references these) */
.mini-player-card--top-left,
.mini-player-card--top-left-title,
.mini-player-card--top-right-title,
.mini-player-card--top-right,
.mini-player-card--bottom-left,
.mini-player-card--bottom-right {
  /* Reset since positioning is now handled by container */
  position: relative;
  top: auto;
  bottom: auto;
  left: auto;
  right: auto;
  transform: none;
}

/* Left-side cards: profile on left, stats on right (normal flex direction) */
.mini-player-card--top-left .mpc-card-inner,
.mini-player-card--top-left-title .mpc-card-inner,
.mini-player-card--bottom-left .mpc-card-inner {
  flex-direction: row; /* Normal direction: profile left, stats right */
  justify-content: flex-start;
}

/* Right-side cards: profile on right, stats on left (reversed flex direction) */
.mini-player-card--top-right .mpc-card-inner,
.mini-player-card--top-right-title .mpc-card-inner,
.mini-player-card--bottom-right .mpc-card-inner {
  flex-direction: row-reverse; /* Reversed direction: profile right, stats left */
  justify-content: flex-start;
}

/* Left-side cards: right-align stats content */
.mini-player-card--top-left .mpc-stat,
.mini-player-card--top-left-title .mpc-stat,
.mini-player-card--bottom-left .mpc-stat {
  justify-content: flex-end; /* Right-align the stat content */
  text-align: right;
}

/* Position dice indicator - positioned outside card within container, like the name label */
/* Top-left card: bottom-right of card area */
.mini-player-card-container--top-left .mpc-active-indicator {
  top: 52px; /* Just below the 60px card height */
  right: -8px; /* Slightly outside the card width */
}

/* Middle-left card: bottom-right of card area */
.mini-player-card-container--top-left-title .mpc-active-indicator {
  top: 52px; /* Just below the 60px card height */
  right: -8px; /* Slightly outside the card width */
}

/* Top-right card: bottom-left of card area */
.mini-player-card-container--top-right .mpc-active-indicator {
  top: 52px; /* Just below the 60px card height */
  left: -8px; /* Slightly outside the card width */
}

/* Middle-right card: bottom-left of card area */
.mini-player-card-container--top-right-title .mpc-active-indicator {
  top: 52px; /* Just below the 60px card height */
  left: -8px; /* Slightly outside the card width */
}

/* Bottom-left card: top-right of card area */
.mini-player-card-container--bottom-left .mpc-active-indicator {
  top: -8px; /* Above the card */
  right: -8px; /* Slightly outside the card width */
}

/* Bottom-right card: top-left of card area */
.mini-player-card-container--bottom-right .mpc-active-indicator {
  top: -8px; /* Above the card */
  left: -8px; /* Slightly outside the card width */
}

/* Hide active indicator for empty cards */
.mini-player-card--empty .mpc-active-indicator {
  display: none;
}

/* Active player highlight - Monster-themed colors */

/* Alienoid active */
.mini-player-card--active[data-monster="alienoid"] {
  filter: drop-shadow(0 0 30px rgba(20, 150, 180, 0.8)) 
          drop-shadow(0 0 60px rgba(20, 150, 180, 0.6))
          drop-shadow(0 0 100px rgba(20, 150, 180, 0.3));
}
.mini-player-card--active[data-monster="alienoid"] .mpc-card-inner {
  border: 3px solid #1496b4 !important;
  box-shadow: 0 0 8px rgba(20, 150, 180, 0.6), 0 2px 6px rgba(0,0,0,0.4);
}
.mini-player-card--active[data-monster="alienoid"]::before {
  content: '';
  position: absolute;
  top: -20px; left: -20px; right: -20px; bottom: -20px;
  background: radial-gradient(ellipse at center, rgba(20, 150, 180, 0.4) 0%, rgba(20, 150, 180, 0.2) 50%, transparent 80%);
  z-index: -1; border-radius: 20px;
}

/* Cyber Bunny active */
.mini-player-card--active[data-monster="cyberbunny"] {
  filter: drop-shadow(0 0 30px rgba(244, 114, 182, 0.8)) 
          drop-shadow(0 0 60px rgba(244, 114, 182, 0.6))
          drop-shadow(0 0 100px rgba(244, 114, 182, 0.3));
}
.mini-player-card--active[data-monster="cyberbunny"] .mpc-card-inner {
  border: 3px solid #f472b6 !important;
  box-shadow: 0 0 8px rgba(244, 114, 182, 0.6), 0 2px 6px rgba(0,0,0,0.4);
}
.mini-player-card--active[data-monster="cyberbunny"]::before {
  content: '';
  position: absolute;
  top: -20px; left: -20px; right: -20px; bottom: -20px;
  background: radial-gradient(ellipse at center, rgba(244, 114, 182, 0.4) 0%, rgba(244, 114, 182, 0.2) 50%, transparent 80%);
  z-index: -1; border-radius: 20px;
}

/* Cyber Kitty active */
.mini-player-card--active[data-monster="cyber-kitty"] {
  filter: drop-shadow(0 0 30px rgba(236, 72, 153, 0.8)) 
          drop-shadow(0 0 60px rgba(236, 72, 153, 0.6))
          drop-shadow(0 0 100px rgba(236, 72, 153, 0.3));
}
.mini-player-card--active[data-monster="cyber-kitty"] .mpc-card-inner {
  border: 3px solid #ec4899 !important;
  box-shadow: 0 0 8px rgba(236, 72, 153, 0.6), 0 2px 6px rgba(0,0,0,0.4);
}
.mini-player-card--active[data-monster="cyber-kitty"]::before {
  content: '';
  position: absolute;
  top: -20px; left: -20px; right: -20px; bottom: -20px;
  background: radial-gradient(ellipse at center, rgba(236, 72, 153, 0.4) 0%, rgba(236, 72, 153, 0.2) 50%, transparent 80%);
  z-index: -1; border-radius: 20px;
}

/* Gigazaur active */
.mini-player-card--active[data-monster="gigazaur"] {
  filter: drop-shadow(0 0 30px rgba(34, 197, 94, 0.8)) 
          drop-shadow(0 0 60px rgba(34, 197, 94, 0.6))
          drop-shadow(0 0 100px rgba(34, 197, 94, 0.3));
}
.mini-player-card--active[data-monster="gigazaur"] .mpc-card-inner {
  border: 3px solid #22c55e !important;
  box-shadow: 0 0 8px rgba(34, 197, 94, 0.6), 0 2px 6px rgba(0,0,0,0.4);
}
.mini-player-card--active[data-monster="gigazaur"]::before {
  content: '';
  position: absolute;
  top: -20px; left: -20px; right: -20px; bottom: -20px;
  background: radial-gradient(ellipse at center, rgba(34, 197, 94, 0.4) 0%, rgba(34, 197, 94, 0.2) 50%, transparent 80%);
  z-index: -1; border-radius: 20px;
}

/* Kraken active */
.mini-player-card--active[data-monster="kraken"] {
  filter: drop-shadow(0 0 30px rgba(59, 130, 246, 0.8)) 
          drop-shadow(0 0 60px rgba(59, 130, 246, 0.6))
          drop-shadow(0 0 100px rgba(59, 130, 246, 0.3));
}
.mini-player-card--active[data-monster="kraken"] .mpc-card-inner {
  border: 3px solid #3b82f6 !important;
  box-shadow: 0 0 8px rgba(59, 130, 246, 0.6), 0 2px 6px rgba(0,0,0,0.4);
}
.mini-player-card--active[data-monster="kraken"]::before {
  content: '';
  position: absolute;
  top: -20px; left: -20px; right: -20px; bottom: -20px;
  background: radial-gradient(ellipse at center, rgba(59, 130, 246, 0.4) 0%, rgba(59, 130, 246, 0.2) 50%, transparent 80%);
  z-index: -1; border-radius: 20px;
}

/* Meka Dragon active - enhanced with higher specificity */
.mini-player-card--active[data-monster="meka-dragon"],
body[data-mobile-ui-mode="radial-menu"] .mini-player-card--active[data-monster="meka-dragon"] {
  filter: drop-shadow(0 0 30px rgba(163, 163, 163, 0.8)) 
          drop-shadow(0 0 60px rgba(163, 163, 163, 0.6))
          drop-shadow(0 0 100px rgba(163, 163, 163, 0.3));
}
.mini-player-card--active[data-monster="meka-dragon"] .mpc-card-inner,
body[data-mobile-ui-mode="radial-menu"] .mini-player-card--active[data-monster="meka-dragon"] .mpc-card-inner {
  border: 3px solid #a3a3a3 !important;
  box-shadow: 0 0 8px rgba(163, 163, 163, 0.6), 0 2px 6px rgba(0,0,0,0.4);
}
.mini-player-card--active[data-monster="meka-dragon"]::before,
body[data-mobile-ui-mode="radial-menu"] .mini-player-card--active[data-monster="meka-dragon"]::before {
  content: '';
  position: absolute;
  top: -20px; left: -20px; right: -20px; bottom: -20px;
  background: radial-gradient(ellipse at center, rgba(163, 163, 163, 0.4) 0%, rgba(163, 163, 163, 0.2) 50%, transparent 80%);
  z-index: -1; border-radius: 20px;
}

/* Space Penguin active */
.mini-player-card--active[data-monster="space-penguin"] {
  filter: drop-shadow(0 0 30px rgba(56, 189, 248, 0.8)) 
          drop-shadow(0 0 60px rgba(56, 189, 248, 0.6))
          drop-shadow(0 0 100px rgba(56, 189, 248, 0.3));
}
.mini-player-card--active[data-monster="space-penguin"] .mpc-card-inner {
  border: 3px solid #38bdf8 !important;
  box-shadow: 0 0 8px rgba(56, 189, 248, 0.6), 0 2px 6px rgba(0,0,0,0.4);
}
.mini-player-card--active[data-monster="space-penguin"]::before {
  content: '';
  position: absolute;
  top: -20px; left: -20px; right: -20px; bottom: -20px;
  background: radial-gradient(ellipse at center, rgba(56, 189, 248, 0.4) 0%, rgba(56, 189, 248, 0.2) 50%, transparent 80%);
  z-index: -1; border-radius: 20px;
}

/* The King active */
.mini-player-card--active[data-monster="the-king"] {
  filter: drop-shadow(0 0 30px rgba(245, 158, 11, 0.8)) 
          drop-shadow(0 0 60px rgba(245, 158, 11, 0.6))
          drop-shadow(0 0 100px rgba(245, 158, 11, 0.3));
}
.mini-player-card--active[data-monster="the-king"] .mpc-card-inner {
  border: 3px solid #f59e0b !important;
  box-shadow: 0 0 8px rgba(245, 158, 11, 0.6), 0 2px 6px rgba(0,0,0,0.4);
}
.mini-player-card--active[data-monster="the-king"]::before {
  content: '';
  position: absolute;
  top: -20px; left: -20px; right: -20px; bottom: -20px;
  background: radial-gradient(ellipse at center, rgba(245, 158, 11, 0.4) 0%, rgba(245, 158, 11, 0.2) 50%, transparent 80%);
  z-index: -1; border-radius: 20px;
}

/* Fallback for unmatched monsters - use yellow as default */
.mini-player-card--active:not([data-monster="alienoid"]):not([data-monster="cyberbunny"]):not([data-monster="cyber-kitty"]):not([data-monster="gigazaur"]):not([data-monster="kraken"]):not([data-monster="meka-dragon"]):not([data-monster="space-penguin"]):not([data-monster="the-king"]) {
  filter: drop-shadow(0 0 30px rgba(255, 207, 51, 0.8)) 
          drop-shadow(0 0 60px rgba(255, 207, 51, 0.6))
          drop-shadow(0 0 100px rgba(255, 207, 51, 0.3));
}
.mini-player-card--active:not([data-monster="alienoid"]):not([data-monster="cyberbunny"]):not([data-monster="cyber-kitty"]):not([data-monster="gigazaur"]):not([data-monster="kraken"]):not([data-monster="meka-dragon"]):not([data-monster="space-penguin"]):not([data-monster="the-king"]) .mpc-card-inner {
  border: 3px solid #ffcf33 !important;
  box-shadow: 0 0 8px rgba(255, 207, 51, 0.6), 0 2px 6px rgba(0,0,0,0.4);
}
.mini-player-card--active:not([data-monster="alienoid"]):not([data-monster="cyberbunny"]):not([data-monster="cyber-kitty"]):not([data-monster="gigazaur"]):not([data-monster="kraken"]):not([data-monster="meka-dragon"]):not([data-monster="space-penguin"]):not([data-monster="the-king"])::before {
  content: '';
  position: absolute;
  top: -20px; left: -20px; right: -20px; bottom: -20px;
  background: radial-gradient(ellipse at center, rgba(255, 207, 51, 0.4) 0%, rgba(255, 207, 51, 0.2) 50%, transparent 80%);
  z-index: -1; border-radius: 20px;
}

/* Only show in radial-menu mode */
body:not([data-mobile-ui-mode="radial-menu"]) .cmp-mini-player-cards {
  display: none;
}

/* Show when radial-menu mode is active */
body[data-mobile-ui-mode="radial-menu"] .cmp-mini-player-cards {
  display: block;
}
