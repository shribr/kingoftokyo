<!DOCTYPE html>
<html>
<head>
    <title>Test Roll-off Dice System</title>
</head>
<body>
    <h1>Test Roll-off Dice System</h1>
    <button id="test-btn">Test Roll-off Dice</button>
    <div id="results"></div>

    <!-- Load the dice system -->
    <script src="js/dice.js"></script>
    
    <script>
        document.getElementById('test-btn').addEventListener('click', function() {
            console.log('Testing roll-off dice system...');
            
            // Create dice collection
            const diceCollection = new DiceCollection(6);
            console.log('DiceCollection created:', diceCollection);
            
            // Reset and roll all dice
            diceCollection.reset();
            diceCollection.rollAll();
            
            // Get dice data
            const diceData = diceCollection.getAllDiceData();
            console.log('Dice data:', diceData);
            
            // Process results like in roll-off
            const rolls = [];
            let attackCount = 0;
            
            for (let i = 0; i < 6; i++) {
                const die = diceData[i];
                if (die && !die.isDisabled) {
                    // Convert dice face to roll-off format
                    let rollValue;
                    if (die.face === 'attack') {
                        rollValue = 1; // Attack faces count as 1
                        attackCount++;
                    } else if (die.face === '1') {
                        rollValue = 1;
                    } else if (die.face === '2') {
                        rollValue = 2;
                    } else if (die.face === '3') {
                        rollValue = 3;
                    } else if (die.face === 'energy') {
                        rollValue = 4; // Energy represented as 4
                    } else if (die.face === 'heal') {
                        rollValue = 5; // Heal represented as 5
                    } else {
                        rollValue = 6; // Fallback
                    }
                    rolls.push(rollValue);
                }
            }
            
            console.log(`Roll-off result: [${rolls.join(', ')}], attacks: ${attackCount}`);
            
            // Display results
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <h3>Test Results:</h3>
                <p>Dice faces: ${diceData.slice(0, 6).map(d => d.face).join(', ')}</p>
                <p>Dice symbols: ${diceData.slice(0, 6).map(d => d.symbol).join(', ')}</p>
                <p>Roll values: [${rolls.join(', ')}]</p>
                <p>Attack count: ${attackCount}</p>
            `;
        });
    </script>
</body>
</html>
