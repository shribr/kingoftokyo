<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>King of Tokyo</title>
    <!-- Goog        <button id="game-log-btn" class="toolbar-btn" title="Game Log">
            <span class="toolbar-icon">L</span>
        </button>
        <button id="storage-mgmt-btn" class="toolbar-btn" title="Storage Management">
            <span class="toolbar-icon">S</span>
        </button>
        <button id="save-game-toolbar-btn" class="toolbar-btn" title="Save Game">
            <span class="toolbar-icon">G</span>
        </button>for handwritten style -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@400;700&display=swap" rel="stylesheet">
    <!-- Modular CSS Structure -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/splash.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/game-areas.css">
    <link rel="stylesheet" href="css/monsters.css">
    <link rel="stylesheet" href="css/dice.css">
    <link rel="stylesheet" href="css/cards.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <div class="splash-content">
            <!-- Left side Polaroids -->
            <div class="polaroids-left">
                <div class="polaroid polaroid-1">
                    <img src="images/characters/king_of_tokyo_gigazaur.png" alt="Gigazaur" />
                    <div class="polaroid-caption">Gigazaur</div>
                </div>
                <div class="polaroid polaroid-2">
                    <img src="images/characters/king_of_tokyo_cyber_bunny.png" alt="Cyber Bunny" />
                    <div class="polaroid-caption">Cyber Bunny</div>
                </div>
                <div class="polaroid polaroid-3">
                    <img src="images/characters/king_of_tokyo_kraken.png" alt="Kraken" />
                    <div class="polaroid-caption">Kraken</div>
                </div>
            </div>
            
            <!-- Main content -->
            <div class="splash-main-content">
                <img src="images/king-of-tokyo-logo.png" alt="King of Tokyo" class="splash-logo-image" />
                <div id="enter-battle-btn" class="splash-subtitle clickable">Enter the battle for Tokyo!</div>
            </div>
            
            <!-- Right side Polaroids -->
            <div class="polaroids-right">
                <div class="polaroid polaroid-4">
                    <img src="images/characters/king_of_tokyo_the_king.png" alt="The King" />
                    <div class="polaroid-caption">The King</div>
                </div>
                <div class="polaroid polaroid-5">
                    <img src="images/characters/king_of_tokyo_meka_dragon.png" alt="Meka Dragon" />
                    <div class="polaroid-caption">Meka Dragon</div>
                </div>
                <div class="polaroid polaroid-6">
                    <img src="images/characters/king_of_tokyo_alienoid.png" alt="Alienoid" />
                    <div class="polaroid-caption">Alienoid</div>
                </div>
            </div>
        </div>
    </div>

    <div id="game-container">
        <!-- Header -->
        <header class="game-header">
            <h1 data-text="KING OF TOKYO!">KING OF TOKYO!</h1>
            <span id="rolls-left" class="rolls-indicator">Rolls left: 3</span>
            <div class="game-info">
            </div>
        </header>

        <!-- Main Game Area -->
        <main class="game-board">
            <!-- Tokyo Area -->
            <div class="tokyo-area">
                <div class="tokyo-bay">
                    <h3>Tokyo Bay</h3>
                    <div id="tokyo-bay-monster" class="monster-slot"></div>
                </div>
                <div class="tokyo-city">
                    <h3>Tokyo City</h3>
                    <div id="tokyo-city-monster" class="monster-slot"></div>
                </div>
                            <!-- Round Indicator -->
            <div class="round-indicator-container">
                <span class="round-label">Round</span>
                <div id="round-indicator" class="round-indicator">
                    <span id="round-counter">1</span>
                </div>
            </div>
            </div>
            <!-- Players Area -->
            <div class="players-area">
                <div id="players-container"></div>
            </div>

            <!-- Game Actions Area -->
            <div class="game-actions">
                <!-- Dice Rolling Area -->
                <div class="dice-area">
                    <div id="dice-container" class="dice-container"></div>
                </div>
                
                <!-- Dice controls next to dice bar -->
                <div class="action-menu">
                    <button id="roll-dice" class="action-button btn primary">Roll Dice</button>
                    <button id="keep-dice" class="action-button btn secondary" disabled>Keep Dice</button>
                    <!-- <button id="buy-cards" class="action-button btn tertiary">Buy Power Cards</button> -->
                    <button id="end-turn" class="action-button btn quaternary">End Turn</button>
                </div>

                <!-- Power Cards Area -->
                <div class="cards-area">
                    <h3>Power Cards</h3>
                    <div id="available-cards" class="cards-container"></div>
                </div>
            </div>
        </main>

        <!-- Game Setup Modal -->
        <div id="setup-modal" class="modal">
            <div class="modal-content">
                <h2>Monster Selection</h2>
                <div class="setup-form">
                    <div class="custom-dropdown" id="player-count-dropdown">
                        <div class="dropdown-selected" id="dropdown-selected">
                            <span class="dropdown-text">Number of Players (2-6)</span>
                            <span class="dropdown-arrow">‚ñº</span>
                        </div>
                        <div class="dropdown-options" id="dropdown-options">
                            <div class="dropdown-option" data-value="2">2 Players</div>
                            <div class="dropdown-option" data-value="3">3 Players</div>
                            <div class="dropdown-option" data-value="4">4 Players</div>
                            <div class="dropdown-option" data-value="5">5 Players</div>
                            <div class="dropdown-option" data-value="6">6 Players</div>
                        </div>
                    </div>
                    
                    <div id="monster-selection">
                        <h3>Choose Your Monsters</h3>
                        <div class="monster-grid" id="monster-grid"></div>
                    </div>
                    
                    <button id="start-game" class="btn primary">Start Game</button>
                </div>
            </div>
        </div>

        <!-- Game Over Modal -->
        <div id="game-over-modal" class="modal hidden">
            <div class="modal-content">
                <h2>Game Over!</h2>
                <div id="winner-announcement"></div>
                <button id="new-game" class="btn primary">New Game</button>
            </div>
        </div>

        <!-- Decision Modal -->
        <div id="decision-modal" class="modal hidden">
            <div class="modal-content decision-modal">
                <div class="decision-header">
                    <h2 id="decision-title">Decision Required</h2>
                    <div id="decision-context" class="decision-context"></div>
                </div>
                <div class="decision-body">
                    <p id="decision-message">You need to make a decision!</p>
                    <div class="decision-monster" id="decision-monster"></div>
                </div>
                <div class="decision-actions">
                    <button id="decision-option-1" class="btn decision-btn primary">Option 1</button>
                    <button id="decision-option-2" class="btn decision-btn secondary">Option 2</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Toolbar -->
    <div id="game-toolbar" class="game-toolbar">
        <button id="instructions-btn" class="toolbar-btn" title="Instructions">
            <span class="toolbar-icon">üìñ</span>
        </button>
        <button id="settings-btn" class="toolbar-btn" title="Settings">
            <span class="toolbar-icon">‚öôÔ∏è</span>
        </button>
        <button id="game-log-btn" class="toolbar-btn" title="Game Log">
            <span class="toolbar-icon">ÔøΩ</span>
        </button>
        <button id="storage-mgmt-btn" class="toolbar-btn" title="Storage Management">
            <span class="toolbar-icon">ÔøΩÔ∏è</span>
        </button>
        <button id="save-game-toolbar-btn" class="toolbar-btn" title="Save Game">
            <span class="toolbar-icon">ÔøΩ</span>
        </button>
        <button id="dark-mode-btn" class="toolbar-btn" title="Toggle Dark Mode">
            <span class="toolbar-icon">üåô</span>
        </button>
    </div>

    <!-- Game Log Modal -->
    <div id="game-log-modal" class="modal hidden">
        <div class="modal-content game-log-content">
            <div class="modal-header">
                <h2>Game Log</h2>
                <button class="close-btn" id="close-game-log">√ó</button>
            </div>
            <div class="game-log-container">
                <div id="game-log-content" class="game-log-entries">
                    <!-- Log entries will be populated here -->
                </div>
            </div>
            <div class="game-log-actions">
                <button id="clear-log-btn" class="game-btn danger large">Clear Log</button>
            </div>
        </div>
    </div>

    <!-- Storage Management Modal -->
    <div id="storage-mgmt-modal" class="modal hidden">
        <div class="modal-content storage-mgmt-content">
            <div class="modal-header">
                <button class="info-btn" id="storage-info-btn" title="About Storage">i</button>
                <h2>Storage Management</h2>
                <button class="close-btn" id="close-storage-mgmt">√ó</button>
            </div>
            <div class="storage-mgmt-container">
                <div class="storage-info-section">
                    <h3>üìä Storage Statistics</h3>
                    <div class="storage-stats" id="storage-stats">
                        <!-- Storage statistics will be populated here -->
                    </div>
                </div>
                
                <div class="storage-actions-section">
                    <h3>üõ†Ô∏è Storage Actions</h3>
                    <div class="storage-controls">
                        <button id="save-game-btn">
                            <span class="btn-icon">üíæ</span>
                            Save Game Now
                        </button>
                        <button id="export-game-btn">
                            <span class="btn-icon">üì§</span>
                            Export Game Data
                        </button>
                        <button id="clear-storage-btn">
                            <span class="btn-icon">üóëÔ∏è</span>
                            Clear All Storage
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- About Storage Side Panel -->
        <div class="storage-about-panel hidden" id="storage-about-panel">
            <div class="storage-about-content">
                <div class="storage-about-header">
                    <div class="storage-about-title">
                        <button class="info-btn small">i</button>
                        <h3>About Storage</h3>
                    </div>
                    <button class="close-btn" id="close-storage-about">√ó</button>
                </div>
                <div class="storage-help-text">
                    <p>Your game data is automatically saved to your browser's storage. This includes:</p>
                    <ul>
                        <li>Complete game state (players, scores, cards, Tokyo positions)</li>
                        <li>Full game log history with hierarchical organization</li>
                        <li>Automatic compression to save space</li>
                        <li>Memory management to prevent slowdowns</li>
                    </ul>
                    <p><strong>Note:</strong> Clearing browser data will remove saved games.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Instructions Modal -->
        <!-- Instructions Modal -->
    <div id="instructions-modal" class="modal instructions-modal hidden">
        <div class="modal-content">
            <button class="close-btn" id="close-instructions">√ó</button>
            <div class="instructions-header">
                <h1 class="instructions-title">KING OF TOKYO</h1>
            </div>
            <div class="instructions-content">
                <!-- Backstory Section -->
                <div class="instructions-section">
                    <h2>üåÜ THE LEGEND OF TOKYO üåÜ</h2>
                    <div class="backstory-text">
                        In the year 2087, a series of mysterious energy rifts opened across the globe, bringing forth colossal monsters from parallel dimensions. Each creature possessed incredible powers and an insatiable hunger for energy crystals that could only be found in major metropolitan areas. Tokyo, with its massive energy grid and towering skyscrapers, became the ultimate prize.
                    </div>
                    <div class="backstory-text">
                        What started as random destruction soon evolved into an epic tournament. The monsters discovered that by defeating opponents and claiming Tokyo as their territory, they could absorb the city's cosmic energy and grow even more powerful. Now, these legendary beasts battle for supremacy in the ultimate kaiju showdown!
                    </div>
                    
                    <h3>ü¶æ Meet the Monsters ü¶æ</h3>
                    <div class="monster-profiles">
                        <div class="monster-profile">
                            <img src="images/characters/king_of_tokyo_gigazaur.png" alt="Gigazaur" class="monster-headshot">
                            <div class="monster-bio">
                                <h4>Gigazaur</h4>
                                <p>The ancient king of reptiles, awakened from a million-year slumber. This massive dinosaur combines prehistoric fury with modern rage. Known for his devastating tail swipes and earth-shaking roar that can shatter windows across three city blocks.</p>
                            </div>
                        </div>
                        
                        <div class="monster-profile">
                            <img src="images/characters/king_of_tokyo_cyber_bunny.png" alt="Cyber Bunny" class="monster-headshot">
                            <div class="monster-bio">
                                <h4>Cyber Bunny</h4>
                                <p>A lab experiment gone adorably wrong. This cybernetically enhanced rabbit gained sentience and giant size after exposure to quantum carrots. Don't let the cute appearance fool you - those hydraulic ears can punch through concrete!</p>
                            </div>
                        </div>
                        
                        <div class="monster-profile">
                            <img src="images/characters/king_of_tokyo_kraken.png" alt="Kraken" class="monster-headshot">
                            <div class="monster-bio">
                                <h4>Kraken</h4>
                                <p>Rising from the deepest ocean trenches, this tentacled terror brings the fury of the seven seas to land. Each of his eight arms can operate independently, making him a master of multi-tasking destruction.</p>
                            </div>
                        </div>
                        
                        <div class="monster-profile">
                            <img src="images/characters/king_of_tokyo_the_king.png" alt="The King" class="monster-headshot">
                            <div class="monster-bio">
                                <h4>The King</h4>
                                <p>The original giant ape, now with a serious attitude problem. After decades of captivity in Hollywood, he's back and ready to show these newcomers who the real king of monsters is. His building-climbing skills are unmatched.</p>
                            </div>
                        </div>
                        
                        <div class="monster-profile">
                            <img src="images/characters/king_of_tokyo_meka_dragon.png" alt="Meka Dragon" class="monster-headshot">
                            <div class="monster-bio">
                                <h4>Meka Dragon</h4>
                                <p>A fusion of ancient magic and cutting-edge technology. This mechanical dragon was created by Tokyo's top scientists to defend the city, but its AI decided that ruling it would be more fun. Breathes both fire and laser beams.</p>
                            </div>
                        </div>
                        
                        <div class="monster-profile">
                            <img src="images/characters/king_of_tokyo_alienoid.png" alt="Alienoid" class="monster-headshot">
                            <div class="monster-bio">
                                <h4>Alienoid</h4>
                                <p>An interdimensional visitor with unclear motives. Some say it's here to study Earth's monsters, others believe it's scouting for an invasion. Either way, its psychic powers and shape-shifting abilities make it a formidable opponent.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Game Overview -->
                <div class="instructions-section">
                    <h2>üéØ HOW TO DOMINATE TOKYO üéØ</h2>
                    <div class="game-overview">
                        <div class="game-feature">
                            <h4>üé≤ Roll for Power</h4>
                            <div class="feature-image">üé≤</div>
                            <p>Roll six custom dice up to three times per turn. Each die face gives you different powers - attack enemies, gain energy, heal damage, or earn victory points!</p>
                        </div>
                        
                        <div class="game-feature">
                            <h4>üèôÔ∏è Control Tokyo</h4>
                            <div class="feature-image">üèôÔ∏è</div>
                            <p>Enter Tokyo to gain victory points each turn, but beware - you can't heal while in the city, and every monster outside will be gunning for you!</p>
                        </div>
                        
                        <div class="game-feature">
                            <h4>‚ö° Buy Power Cards</h4>
                            <div class="feature-image">‚ö°</div>
                            <p>Spend energy cubes to purchase powerful cards that give you permanent abilities, bonus attacks, or special powers to dominate your opponents!</p>
                        </div>
                        
                        <div class="game-feature">
                            <h4>üíÄ Eliminate Rivals</h4>
                            <div class="feature-image">üíÄ</div>
                            <p>Reduce enemy monsters to 0 health to eliminate them from the game. Last monster standing automatically wins the ultimate prize!</p>
                        </div>
                    </div>
                </div>

                <!-- Dice Reference -->
                <div class="instructions-section">
                    <h2>üé≤ DICE FACES EXPLAINED üé≤</h2>
                    <div class="dice-grid">
                        <div class="dice-face-info">
                            <span class="dice-symbol">üëä</span>
                            <h5>Attack</h5>
                            <p>Deal damage to monsters in or outside Tokyo</p>
                        </div>
                        <div class="dice-face-info">
                            <span class="dice-symbol">‚ö°</span>
                            <h5>Energy</h5>
                            <p>Gain energy cubes to buy power cards</p>
                        </div>
                        <div class="dice-face-info">
                            <span class="dice-symbol">‚ù§Ô∏è</span>
                            <h5>Heart</h5>
                            <p>Heal damage (only if outside Tokyo)</p>
                        </div>
                        <div class="dice-face-info">
                            <span class="dice-symbol">1Ô∏è‚É£</span>
                            <h5>Numbers</h5>
                            <p>Collect 3+ of same number for victory points</p>
                        </div>
                        <div class="dice-face-info">
                            <span class="dice-symbol">2Ô∏è‚É£</span>
                            <h5>Numbers</h5>
                            <p>3=1VP, 4=2VP, 5=3VP, 6=4VP</p>
                        </div>
                        <div class="dice-face-info">
                            <span class="dice-symbol">3Ô∏è‚É£</span>
                            <h5>Numbers</h5>
                            <p>Roll more of same number for bonus points</p>
                        </div>
                    </div>
                </div>

                <!-- Victory Conditions -->
                <div class="instructions-section">
                    <h2>üèÜ PATHS TO VICTORY üèÜ</h2>
                    <div class="victory-paths">
                        <div class="victory-path">
                            <h4>Victory Points</h4>
                            <ul>
                                <li>Reach 20 victory points first</li>
                                <li>Gain points by controlling Tokyo</li>
                                <li>Roll matching numbers (3+ of same)</li>
                                <li>Buy powerful scoring cards</li>
                                <li>Some cards give bonus points</li>
                            </ul>
                        </div>
                        
                        <div class="victory-path">
                            <h4>Last Monster Standing</h4>
                            <ul>
                                <li>Eliminate all other monsters</li>
                                <li>Deal damage with attack dice</li>
                                <li>Use power cards for extra damage</li>
                                <li>Force enemies out of Tokyo</li>
                                <li>Prevent others from healing</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Quick Reference -->
                <div class="instructions-section">
                    <h2>‚ö° QUICK REFERENCE ‚ö°</h2>
                    <div class="quick-reference">
                        <div class="quick-ref-item">
                            <h5>Turn Sequence</h5>
                            <p>1. Roll dice (up to 3 times)<br>2. Resolve dice effects<br>3. Buy power cards<br>4. End turn</p>
                        </div>
                        <div class="quick-ref-item">
                            <h5>Tokyo Rules</h5>
                            <p>Enter: +1 VP immediately<br>Stay: +2 VP each turn start<br>Can't heal while inside<br>Must leave if taking damage</p>
                        </div>
                        <div class="quick-ref-item">
                            <h5>Attack Resolution</h5>
                            <p>In Tokyo: Attack all outside<br>Outside: Attack monster in Tokyo<br>No Tokyo monster: No attacks<br>Defender chooses to stay/leave</p>
                        </div>
                        <div class="quick-ref-item">
                            <h5>Power Cards</h5>
                            <p>Cost energy cubes to buy<br>Permanent abilities<br>Some give instant effects<br>Discard when instructed</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/gameStorage.js"></script>
    <script>console.log('‚úÖ gameStorage.js loaded, gameStorage available:', typeof gameStorage !== 'undefined');</script>
    
    <script src="js/monsters.js"></script>
    <script>console.log('‚úÖ monsters.js loaded, MONSTERS available:', typeof MONSTERS !== 'undefined');</script>
    
    <script src="js/cards.js"></script>
    <script>console.log('‚úÖ cards.js loaded, POWER_CARDS available:', typeof POWER_CARDS !== 'undefined');</script>
    
    <script src="js/dice.js"></script>
    <script>console.log('‚úÖ dice.js loaded');</script>
    
    <script src="js/ui-utilities.js"></script>
    <script>console.log('‚úÖ ui-utilities.js loaded, UIUtilities available:', typeof UIUtilities !== 'undefined');</script>
    
    <script src="js/game.js"></script>
    <script>console.log('‚úÖ game.js loaded, KingOfTokyoGame available:', typeof KingOfTokyoGame !== 'undefined');</script>
    
    <script src="js/main.js"></script>
</body>
</html>
